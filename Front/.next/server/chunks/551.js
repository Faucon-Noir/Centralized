exports.id=551,exports.ids=[551],exports.modules={7153:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>l});var n=a(997),i=a(2880),r=a(1163),c=a(6689),o=e([i]);i=(o.then?(await o)():o)[0];let l=({children:e})=>{let t=(0,r.useRouter)(),[a,s]=(0,c.useState)(!0),o=()=>{let e=localStorage.getItem("token");if("/login"!==t.pathname&&"/"!==t.pathname){if(e)try{let a=(0,i.jwtDecode)(e);if(a.exp){let e=new Date(1e3*a.exp),s=new Date;if(e<s){console.log("Token expired"),t.push("/login");return}}else{console.log("Invalid token"),t.push("/login");return}}catch(e){console.log("Error decoding token"),t.push("/login");return}else{console.log("No token, please login"),t.push("/login");return}}s(!1)};return((0,c.useEffect)(()=>{o()},[t.pathname]),a)?n.jsx("div",{children:"Chargement..."}):n.jsx(n.Fragment,{children:e})};s()}catch(e){s(e)}})},6249:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var s=a(997),n=a(1163),i=a(1664),r=a.n(i),c=a(844),o=a.n(c),l=a(1191),d=a.n(l),u=a(6689);a(2753);var h=a(6711);function g({page:e="",userData:t}){let[a,i]=(0,u.useState)({}),[c,l]=(0,u.useState)(!0),g=(0,n.useRouter)();return((0,u.useEffect)(()=>{if(t?.project?.length>0){let e=localStorage.getItem("selectedP"),a={};for(let s of t.project){if(null!=e)for(let t of e.split(","))t===s.id&&(a[t]=s);if(t.selectedProjects.length>0)for(let e of t.selectedProjects)s.id===e&&(a[e]=s)}i(a)}l(!1)},[t]),c)?s.jsx("div",{children:"Chargement des projets..."}):(0,s.jsxs)("div",{className:"navigation-desktop",children:[s.jsx("div",{className:"centralized_logo",children:s.jsx("img",{src:"/assets/logo/WhiteLogoLeft.png",alt:"Logo",className:"logo"})}),s.jsx("div",{className:"home_button",children:s.jsx(r(),{href:"/home",children:(0,s.jsxs)("button",{className:"HomePage"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/home_icon.svg",alt:""})," Tableau de bord"]})})}),(0,s.jsxs)("div",{className:"navigation_nav",children:[s.jsx(r(),{href:"/planning",children:(0,s.jsxs)("button",{className:"Planning"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/planning.svg",alt:""}),"Mon Planning"]})}),s.jsx(r(),{href:"/specification",children:(0,s.jsxs)("button",{className:"Specification"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/specification.svg",alt:""}),"Mes projets"]})}),s.jsx(r(),{href:"/team",children:(0,s.jsxs)("button",{className:"Team"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/teams.svg",alt:""}),"Mes \xe9quipes"]})}),Object.keys(a).length>0?s.jsx("div",{className:"selectedContainer",children:Object.values(a).map((t,a)=>(0,s.jsxs)("div",{className:"projectOpen",children:[s.jsx("a",{className:"DashboardPage"==e&&t?.id==window.location.pathname.split("/")[2]?"ProjectBlocName selected":"ProjectBlocName",href:"/dashboard/"+t.id,children:(0,s.jsxs)("button",{className:"pName",children:[s.jsx("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>(function(e){let t=localStorage.getItem("selectedP")?.split(",");if(t){let a=t.indexOf(e);-1!=a&&(t.splice(a,1),localStorage.setItem("selectedP",t.join(",")),i(t=>{let a={...t};return delete a[e],a}),window.location.reload())}})(t.id)}),s.jsx(o(),{sx:{color:(0,h.gj)(t.color),height:"35px",width:"35px"},children:s.jsx(d(),{fontSize:"large"})}),s.jsx("p",{children:t.name})]})}),(0,s.jsxs)("div",{className:"submenu",children:[s.jsx("a",{href:"http://localhost:3000/specification/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[s.jsx("img",{src:"/assets/icons/project.svg",alt:""}),s.jsx("p",{children:"Cahier des charges"})]})}),s.jsx("a",{href:"http://localhost:3000/ticket/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[s.jsx("img",{src:"/assets/icons/tickets.svg",alt:""}),s.jsx("p",{children:"Tickets"})]})})]})]},a))}):null]}),(0,s.jsxs)("div",{className:"navigation_profile",children:[s.jsx(r(),{href:"/account",children:(0,s.jsxs)("button",{className:"account"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/user.svg",alt:""})," Mon compte"]})}),(0,s.jsxs)("button",{className:"navigation_button red",onClick:()=>void(localStorage.removeItem("token"),localStorage.setItem("connected","false"),g.push("/")),children:[s.jsx("img",{src:"/assets/icons/x.svg",alt:""})," D\xe9connexion"]})]})]})}},7624:(e,t,a)=>{"use strict";a.d(t,{Z:()=>g});var s=a(997),n=a(1191),i=a.n(n),r=a(844),c=a.n(r),o=a(1664),l=a.n(o),d=a(1163),u=a(6689);a(6067);var h=a(6711);function g({page:e="",userData:t,setShowMobileNav:a}){let[n,r]=(0,u.useState)({}),[o,g]=(0,u.useState)(!0),m=(0,d.useRouter)();return((0,u.useEffect)(()=>{if(t?.project?.length>0){let e=localStorage.getItem("selectedP"),a={};for(let s of t.project){if(null!=e)for(let t of e.split(","))t===s.id&&(a[t]=s);if(t.selectedProjects.length>0)for(let e of t.selectedProjects)s.id===e&&(a[e]=s)}r(a)}g(!1)},[t]),o)?s.jsx("div",{children:"Chargement des projets..."}):s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"navigation-mobile mobileNav",children:[s.jsx("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>a(!1)}),s.jsx("div",{className:"centralized_logo",children:s.jsx("img",{src:"/assets/logo/WhiteLogoLeft.png",alt:"Logo",className:"logo"})}),s.jsx("div",{className:"home_button",children:s.jsx(l(),{href:"/home",children:(0,s.jsxs)("button",{className:"HomePage"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/home_icon.svg",alt:""})," ","Tableau de bord"]})})}),(0,s.jsxs)("div",{className:"navigation_nav",children:[s.jsx(l(),{href:"/planning",children:(0,s.jsxs)("button",{className:"Planning"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/planning.svg",alt:""}),"Mon Planning"]})}),s.jsx(l(),{href:"/specification",children:(0,s.jsxs)("button",{className:"Specification"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/specification.svg",alt:""}),"Mes projets"]})}),s.jsx(l(),{href:"/team",children:(0,s.jsxs)("button",{className:"Team"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/teams.svg",alt:""}),"Mes \xe9quipes"]})}),Object.keys(n).length>0?s.jsx("div",{className:"selectedContainer",children:Object.values(n).map((t,a)=>(0,s.jsxs)("div",{className:"projectOpen",children:[s.jsx("a",{className:"DashboardPage"==e&&t?.id==window.location.pathname.split("/")[2]?"ProjectBlocName selected":"ProjectBlocName",href:"/dashboard/"+t.id,children:(0,s.jsxs)("button",{className:"pName",children:[s.jsx("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>(function(e){let t=localStorage.getItem("selectedP")?.split(",");if(t){let a=t.indexOf(e);-1!=a&&(t.splice(a,1),localStorage.setItem("selectedP",t.join(",")),r(t=>{let a={...t};return delete a[e],a}),window.location.reload())}})(t.id)}),s.jsx(c(),{sx:{color:(0,h.gj)(t.color),height:"35px",width:"35px"},children:s.jsx(i(),{fontSize:"large"})}),s.jsx("p",{children:t.name})]})}),(0,s.jsxs)("div",{className:"submenu",children:[s.jsx("a",{href:"/specification/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[s.jsx("img",{src:"/assets/icons/project.svg",alt:""}),s.jsx("p",{children:"Cahier des charges"})]})}),s.jsx("a",{href:"/ticket/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[s.jsx("img",{src:"/assets/icons/tickets.svg",alt:""}),s.jsx("p",{children:"Tickets"})]})})]})]},a))}):null]}),(0,s.jsxs)("div",{className:"navigation_profile",children:[s.jsx(l(),{href:"/account",children:(0,s.jsxs)("button",{className:"account"==e?"navigation_button active":"navigation_button",children:[s.jsx("img",{src:"/assets/icons/user.svg",alt:""})," Mon compte"]})}),(0,s.jsxs)("button",{className:"navigation_button red",onClick:()=>void(localStorage.removeItem("token"),localStorage.setItem("connected","false"),m.push("/")),children:[s.jsx("img",{src:"/assets/icons/x.svg",alt:""})," D\xe9connexion"]})]})]})})}},8554:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>h});var n=a(997),i=a(6689),r=a(3965),c=a(9648),o=a(8176),l=a(4850);a(9418);var d=a(1163),u=e([c,l]);function h(){(0,d.useRouter)();let{isTaskStarted:e,isTaskComplete:t,completeTask:a}=(0,r.V)(),[s,u]=(0,i.useState)(!1),[h,g]=(0,i.useState)({project:[{rex:[],ticket:[]}],team:[],user:[],specification:[]});return(0,i.useEffect)(()=>{(0,l.Z)().then(e=>{g(e),console.log(e)})},[]),(0,i.useEffect)(()=>{if(null!==h){let s;return e&&!t&&(u(!0),s=setInterval(async()=>{try{let e=await c.default.get("http://localhost:8000/api/specification/check-status",{headers:{Authorization:`Bearer ${h.user.token}`}});!0===e.data.status&&(a(),u(!1),clearInterval(s))}catch(e){console.error("Erreur lors du polling",e),clearInterval(s)}},1e4)),()=>clearInterval(s)}},[e,t,a,h.user.token]),n.jsx(n.Fragment,{children:s&&(0,n.jsxs)("div",{className:"reqLoad",children:[n.jsx("p",{children:"Cr\xe9ation de votre cahier des charges..."}),n.jsx("p",{style:{fontSize:"10px"},children:"G\xe9n\xe9ration de votre cahier des charges par IA."}),n.jsx(o.BarLoader,{color:"white",loading:!0,speedMultiplier:1,width:200})]})})}[c,l]=u.then?(await u)():u,s()}catch(e){s(e)}})},3965:(e,t,a)=>{"use strict";a.d(t,{V:()=>r,o:()=>c});var s=a(997),n=a(6689);let i=(0,n.createContext)(null);function r(){let e=(0,n.useContext)(i);if(!e)throw Error("useTask doit \xeatre utilis\xe9 dans un TaskProvider");return e}function c({children:e}){let[t,a]=(0,n.useState)(!1),[r,c]=(0,n.useState)(!1);return s.jsx(i.Provider,{value:{isTaskStarted:t,isTaskComplete:r,startTask:()=>a(!0),completeTask:()=>c(!0)},children:e})}},6711:(e,t,a)=>{"use strict";a.d(t,{$E:()=>u,Vp:()=>d,gj:()=>l,iy:()=>h}),a(997);var s=a(6637),n=a.n(s),i=a(1712),r=a.n(i),c=a(1197),o=a.n(c);function l(e){let t="";switch(e%10){case 0:t="#FB2C39";break;case 2:t="#8BC729";break;case 3:t="#FAC602";break;case 4:t="#8129C7";break;case 5:t="#0A122A";break;case 6:t="#698F3F";break;case 7:t="#074F57";break;case 8:t="#9ECE9A";break;case 9:t="#9AD1D4";break;case 10:t="#CCDBDC";break;default:t="#0293FC"}return t}function d(e){let t=Array.from({length:9},(e,t)=>r()(o()(n()(new Date,t-4)),"dd/MM/yyyy")),a=Array.from({length:9},(e,t)=>0);for(let s of e)if("r\xe9solu"!=s.status){let e=e=>e==r()(o()(new Date(s.end_date)),"dd/MM/yyyy"),n=t.findIndex(e);-1!=n&&a[n]++}return{week:t,nbr_ticket:a}}function u(e,t){for(let a of t)if(e==a.userName)return a.nbr_ticket;return 0}function h(e){let t=["#FB2C39","#8BC729","#FAC602","#8129C7","#0A122A","#698F3F","#074F57","#9ECE9A","#9AD1D4","#CCDBDC","#0293FC"];return t.splice(0,11-e),t}},5551:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>b});var n=a(997),i=a(1751),r=a.n(i),c=a(7153),o=a(3965),l=a(6249),d=a(7624),u=a(7373),h=a.n(u),g=a(3365),m=a.n(g),j=a(1163),x=a(6689);a(1816),a(5810);var f=a(4850),p=a(8554),v=e([c,f,p]);function b({Component:e,pageProps:t}){let[a,s]=(0,x.useState)(!1),[i,u]=(0,x.useState)(!0),[g,v]=(0,x.useState)({project:[{rex:[],ticket:[]}],team:[],user:[],specification:[],selectedProjects:[]}),[b,k]=(0,x.useState)(0),w=(0,j.useRouter)();return((0,x.useEffect)(()=>{k(window.innerWidth);let e=()=>k(window.innerWidth),t=()=>k(window.innerWidth);return window.addEventListener("resize",e),w.events.on("routeChangeComplete",t),()=>{window.removeEventListener("resize",e),w.events.off("routeChangeComplete",t)}},[w.events]),(0,x.useEffect)(()=>{"b"!=e.name&&"h"!=e.name?(0,f.Z)().then(e=>{v(e),u(!1)}):u(!1)},[e.name]),(0,x.useEffect)(()=>{let e=e=>{"/home"===e&&window.location.reload()};return w.events.on("routeChangeComplete",e),()=>{w.events.off("routeChangeComplete",e)}},[w]),i)?n.jsx("div",{children:"En attente"}):(console.log(e.name),n.jsx("main",{className:r().className,style:{height:"100%"},children:"b"==e.name||"h"==e.name?n.jsx(e,{...t}):n.jsx(c.Z,{children:n.jsx(o.o,{children:"b"===e.name?n.jsx(e,{...t,userData:g}):b>=1280?(0,n.jsxs)(h(),{container:!0,style:{height:"100%"},children:[n.jsx(h(),{xs:2,item:!0,children:n.jsx(l.Z,{page:e.name,userData:g?.user?g:{},updateUserData:v})}),(0,n.jsxs)(h(),{xs:10,item:!0,children:[n.jsx(e,{...t,userData:g?.user?g:{},updateUserData:v}),n.jsx(p.Z,{})]})]}):(0,n.jsxs)(n.Fragment,{children:[n.jsx(m(),{className:"burgerMenu",onClick:()=>s(!0)}),a?n.jsx(d.Z,{page:e.name,userData:g?.user?g:{},setShowMobileNav:s}):n.jsx(n.Fragment,{}),n.jsx(e,{...t,userData:g?.user?g:{},updateUserData:v}),n.jsx(p.Z,{})]})})})}))}[c,f,p]=v.then?(await v)():v,s()}catch(e){s(e)}})},4850:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>j});var n=a(2880),i=a(8648),r=a(6664),c=a(6466),o=a(2471),l=a(1759),d=a(6914),u=a(1827),h=a(3777),g=a(6711),m=e([n,i,r,c,o,l,d,u,h]);async function j(){let e=localStorage.getItem("token");if(null==e)return null;var t="",a={user:{avatar:"",bio:"",created_at:"",firstname:"",id:"",lastname:"",email:"",password:"",phone:"",token:""},project:[{id:"",rex:[],ticket:{ticket:[],count:0}}],team:[{}],specification:[{}],selectedProjects:[],stat:{nbrAllTicket:0,nbrTicketByUser:[{userName:"",nbr_ticket:0}],nbrTicket:0,nbrTicketPerWeek:{week:[""],nbr_ticket:[0]},error:!1}};if(e){let s=(0,n.jwtDecode)(e);t=s.id,a.user=await (0,i.Z)(t,e),a.project=await (0,r.Z)(t,e),a.specification=await (0,l.Z)(t,e),a.team=await (0,c.Z)(t,e),a.user&&a.project&&a.specification&&a.team||(window.location.href="/login");let m=a.project[a.project.length-1];for(let s of(a.stat.nbrAllTicket=(await (0,h.Z)(t,e)).nbr_ticket,a.project))s.rex=await (0,d.Z)(s.id,e),s.ticket=await (0,o.Z)(s.id,e);if(null!=m){let s=(0,g.Vp)(m?.ticket?.ticket);a.stat.nbrTicketPerWeek.week=s.week,a.stat.nbrTicketPerWeek.nbr_ticket=s.nbr_ticket,a.stat.nbrTicketByUser=await (0,u.Z)(t,e,m.id);let n=a.user.firstname+" "+a.user.lastname;a.stat.nbrTicket=(0,g.$E)(n,a.stat.nbrTicketByUser)}return a.user.token=e,a}window.location.href="/login"}[n,i,r,c,o,l,d,u,h]=m.then?(await m)():m,s()}catch(e){s(e)}})},1827:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t,a){try{return(await n.default.get("http://localhost:8000/api/ticket/user/"+e+"/project/"+a,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},3777:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t){try{return(await n.default.get("http://localhost:8000/api/ticket/user/"+e+"/count/",{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},6914:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t){try{let a=await n.default.get("http://localhost:8000/api/rex/project/"+e,{headers:{Authorization:`Bearer ${t}`}});if(a.data.error)return{};return a.data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},8648:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t){try{return(await n.default.get("http://localhost:8000/api/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},6664:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t){try{return(await n.default.get("http://localhost:8000/api/project/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},1759:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t){try{return(await n.default.get("http://localhost:8000/api/cdc/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},6466:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t){try{return(await n.default.get("http://localhost:8000/api/teamuser/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},2471:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Z:()=>r});var n=a(9648),i=e([n]);async function r(e,t){try{return(await n.default.get("http://localhost:8000/api/ticket/project/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},2753:()=>{},6067:()=>{},9418:()=>{},5810:()=>{},1816:()=>{}};