exports.id=964,exports.ids=[964],exports.modules={11559:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>l});var n=a(8732),i=a(32564),c=a(86715),r=a(82015),o=e([i]);i=(o.then?(await o)():o)[0];let l=({children:e})=>{let t=(0,c.useRouter)(),[a,s]=(0,r.useState)(!0),o=()=>{let e=localStorage.getItem("token");if("/login"!==t.pathname&&"/"!==t.pathname){if(e)try{let a=(0,i.jwtDecode)(e);if(a.exp){let e=new Date(1e3*a.exp),s=new Date;if(e<s){console.log("Token expired"),t.push("/login");return}}else{console.log("Invalid token"),t.push("/login");return}}catch(e){console.log("Error decoding token"),t.push("/login");return}else{console.log("No token, please login"),t.push("/login");return}}s(!1)};return((0,r.useEffect)(()=>{o()},[t.pathname]),a)?(0,n.jsx)("div",{children:"Chargement..."}):(0,n.jsx)(n.Fragment,{children:e})};s()}catch(e){s(e)}})},57975:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var s=a(8732),n=a(86715),i=a(91106),c=a.n(i),r=a(62390),o=a.n(r),l=a(40159),d=a(82015);a(24833);var u=a(16313);function h({page:e="",userData:t}){let[a,i]=(0,d.useState)({}),[r,h]=(0,d.useState)(!0),g=(0,n.useRouter)();return r?(0,s.jsx)("div",{children:"Chargement des projets..."}):(0,s.jsxs)("div",{className:"navigation-desktop",children:[(0,s.jsx)("div",{className:"centralized_logo",children:(0,s.jsx)("img",{"data-cy":"logo_desktop_nav_cy",src:"/assets/logo/WhiteLogoLeft.png",alt:"Logo",className:"logo"})}),(0,s.jsx)("div",{className:"home_button",children:(0,s.jsx)(c(),{href:"/home",children:(0,s.jsxs)("button",{"data-cy":"link_home_desktop_nav_cy",className:"HomePage"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/home_icon.svg",alt:""})," Tableau de bord"]})})}),(0,s.jsxs)("div",{className:"navigation_nav",children:[(0,s.jsx)(c(),{href:"/planning",children:(0,s.jsxs)("button",{"data-cy":"link_planning_desktop_nav_cy",className:"Planning"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/planning.svg",alt:""}),"Mon Planning"]})}),(0,s.jsx)(c(),{href:"/specification",children:(0,s.jsxs)("button",{"data-cy":"link_specification_desktop_nav_cy",className:"Specification"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/specification.svg",alt:""}),"Mes projets"]})}),(0,s.jsx)(c(),{href:"/team",children:(0,s.jsxs)("button",{"data-cy":"link_team_desktop_nav_cy",className:"Team"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/teams.svg",alt:""}),"Mes \xe9quipes"]})}),Object.keys(a).length>0?(0,s.jsx)("div",{className:"selectedContainer",children:Object.values(a).map((t,a)=>(0,s.jsxs)("div",{"data-cy":"project_open_desktop_nav_cy",className:"projectOpen",children:[(0,s.jsx)("a",{"data-cy":"link_team_desktop_nav_cy",className:"DashboardPage"==e&&t?.id==window.location.pathname.split("/")[2]?"ProjectBlocName selected":"ProjectBlocName",href:"/dashboard/"+t.id,children:(0,s.jsxs)("button",{className:"pName",children:[(0,s.jsx)("img",{"data-cy":"button_close_project_desktop_nav_cy",src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>(function(e){let t=localStorage.getItem("selectedP")?.split(",");if(t){let a=t.indexOf(e);-1!=a&&(t.splice(a,1),localStorage.setItem("selectedP",t.join(",")),i(t=>{let a={...t};return delete a[e],a}),window.location.reload())}})(t.id)}),(0,s.jsx)(o(),{sx:{color:(0,u.wT)(t.color),height:"35px",width:"35px"},children:(0,s.jsx)(l.A,{fontSize:"large"})}),(0,s.jsx)("p",{children:t.name})]})}),(0,s.jsxs)("div",{className:"submenu",children:[(0,s.jsx)("a",{"data-cy":"link_one_specification_desktop_nav_cy",href:"/specification/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[(0,s.jsx)("img",{src:"/assets/icons/project.svg",alt:""}),(0,s.jsx)("p",{children:"Cahier des charges"})]})}),(0,s.jsx)("a",{"data-cy":"link_ticket_desktop_nav_cy",href:"/ticket/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[(0,s.jsx)("img",{src:"/assets/icons/tickets.svg",alt:""}),(0,s.jsx)("p",{children:"Tickets"})]})})]})]},a))}):null]}),(0,s.jsxs)("div",{className:"navigation_profile",children:[(0,s.jsx)(c(),{href:"/account",children:(0,s.jsxs)("button",{"data-cy":"link_account_desktop_nav_cy",className:"AccountPage"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/user.svg",alt:""})," Mon compte"]})}),(0,s.jsxs)("button",{"data-cy":"link_logout_desktop_nav_cy",className:"navigation_button red",onClick:()=>void(localStorage.removeItem("token"),localStorage.setItem("connected","false"),g.push("/")),children:[(0,s.jsx)("img",{src:"/assets/icons/x.svg",alt:""})," D\xe9connexion"]})]})]})}},42058:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var s=a(8732),n=a(40159),i=a(62390),c=a.n(i),r=a(91106),o=a.n(r),l=a(86715),d=a(82015);a(77103);var u=a(16313);function h({page:e="",userData:t,setShowMobileNav:a}){let[i,r]=(0,d.useState)({}),[h,g]=(0,d.useState)(!0),m=(0,l.useRouter)();return h?(0,s.jsx)("div",{children:"Chargement des projets..."}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"navigation-mobile mobileNav",children:[(0,s.jsx)("img",{"data-cy":"button_hide_mobile_nav_cy",src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>a(!1)}),(0,s.jsx)("div",{"data-cy":"logo_mobile_nav_cy",className:"centralized_logo",children:(0,s.jsx)("img",{src:"/assets/logo/WhiteLogoLeft.png",alt:"Logo",className:"logo"})}),(0,s.jsx)("div",{className:"home_button",children:(0,s.jsx)(o(),{href:"/home",children:(0,s.jsxs)("button",{"data-cy":"link_home_mobile_nav_cy",className:"HomePage"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/home_icon.svg",alt:""})," ","Tableau de bord"]})})}),(0,s.jsxs)("div",{className:"navigation_nav",children:[(0,s.jsx)(o(),{href:"/planning",children:(0,s.jsxs)("button",{"data-cy":"link_planning_mobile_nav_cy",className:"Planning"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/planning.svg",alt:""}),"Mon Planning"]})}),(0,s.jsx)(o(),{href:"/specification",children:(0,s.jsxs)("button",{"data-cy":"link_specification_mobile_nav_cy",className:"Specification"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/specification.svg",alt:""}),"Mes projets"]})}),(0,s.jsx)(o(),{href:"/team",children:(0,s.jsxs)("button",{"data-cy":"link_team_mobile_nav_cy",className:"Team"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/teams.svg",alt:""}),"Mes \xe9quipes"]})}),Object.keys(i).length>0?(0,s.jsx)("div",{className:"selectedContainer",children:Object.values(i).map((t,a)=>(0,s.jsxs)("div",{"data-cy":"project_open_mobile_nav_cy",className:"projectOpen",children:[(0,s.jsx)("a",{"data-cy":"link_team_mobile_nav_cy",className:"DashboardPage"==e&&t?.id==window.location.pathname.split("/")[2]?"ProjectBlocName selected":"ProjectBlocName",href:"/dashboard/"+t.id,children:(0,s.jsxs)("button",{"data-cy":"button_close_project_mobile_nav_cy",className:"pName",children:[(0,s.jsx)("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>(function(e){let t=localStorage.getItem("selectedP")?.split(",");if(t){let a=t.indexOf(e);-1!=a&&(t.splice(a,1),localStorage.setItem("selectedP",t.join(",")),r(t=>{let a={...t};return delete a[e],a}),window.location.reload())}})(t.id)}),(0,s.jsx)(c(),{sx:{color:(0,u.wT)(t.color),height:"35px",width:"35px"},children:(0,s.jsx)(n.A,{fontSize:"large"})}),(0,s.jsx)("p",{children:t.name})]})}),(0,s.jsxs)("div",{className:"submenu",children:[(0,s.jsx)("a",{"data-cy":"link_one_specification_mobile_nav_cy",href:"/specification/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[(0,s.jsx)("img",{src:"/assets/icons/project.svg",alt:""}),(0,s.jsx)("p",{children:"Cahier des charges"})]})}),(0,s.jsx)("a",{"data-cy":"link_ticket_mobile_nav_cy",href:"/ticket/"+t.id,children:(0,s.jsxs)("button",{className:"submenu_btn",children:[(0,s.jsx)("img",{src:"/assets/icons/tickets.svg",alt:""}),(0,s.jsx)("p",{children:"Tickets"})]})})]})]},a))}):null]}),(0,s.jsxs)("div",{className:"navigation_profile",children:[(0,s.jsx)(o(),{"data-cy":"link_account_mobile_nav_cy",href:"/account",children:(0,s.jsxs)("button",{className:"AccountPage"==e?"navigation_button active":"navigation_button",children:[(0,s.jsx)("img",{src:"/assets/icons/user.svg",alt:""})," Mon compte"]})}),(0,s.jsxs)("button",{"data-cy":"link_logout_mobile_nav_cy",className:"navigation_button red",onClick:()=>void(localStorage.removeItem("token"),localStorage.setItem("connected","false"),m.push("/")),children:[(0,s.jsx)("img",{src:"/assets/icons/x.svg",alt:""})," D\xe9connexion"]})]})]})})}},57455:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>h});var n=a(8732),i=a(82015),c=a(92058),r=a(1428),o=a(67176),l=a(85964);a(29588);var d=a(86715),u=e([r,l]);function h(){(0,d.useRouter)();let{isTaskStarted:e,isTaskComplete:t,completeTask:a}=(0,c.b)(),[s,r]=(0,i.useState)(!1),[l,u]=(0,i.useState)({project:[{rex:[],ticket:[]}],team:[],user:[],specification:[]});return(0,n.jsx)(n.Fragment,{children:s&&(0,n.jsxs)("div",{className:"reqLoad",children:[(0,n.jsx)("p",{children:"Cr\xe9ation de votre cahier des charges..."}),(0,n.jsx)("p",{style:{fontSize:"10px"},children:"G\xe9n\xe9ration de votre cahier des charges par IA."}),(0,n.jsx)(o.BarLoader,{color:"white",loading:!0,speedMultiplier:1,width:200})]})})}[r,l]=u.then?(await u)():u,s()}catch(e){s(e)}})},92058:(e,t,a)=>{"use strict";a.d(t,{b:()=>c,n:()=>r});var s=a(8732),n=a(82015);let i=(0,n.createContext)(null);function c(){let e=(0,n.useContext)(i);if(!e)throw Error("useTask doit \xeatre utilis\xe9 dans un TaskProvider");return e}function r({children:e}){let[t,a]=(0,n.useState)(!1),[c,r]=(0,n.useState)(!1);return(0,s.jsx)(i.Provider,{value:{isTaskStarted:t,isTaskComplete:c,startTask:()=>a(!0),completeTask:()=>r(!0)},children:e})}},16313:(e,t,a)=>{"use strict";a.d(t,{D7:()=>h,U4:()=>d,i$:()=>u,wT:()=>l}),a(8732);var s=a(72863),n=a.n(s),i=a(36668),c=a.n(i),r=a(65457),o=a.n(r);function l(e){let t="";switch(e%10){case 0:t="#FB2C39";break;case 2:t="#8BC729";break;case 3:t="#FAC602";break;case 4:t="#8129C7";break;case 5:t="#0A122A";break;case 6:t="#698F3F";break;case 7:t="#074F57";break;case 8:t="#9ECE9A";break;case 9:t="#9AD1D4";break;case 10:t="#CCDBDC";break;default:t="#0293FC"}return t}function d(e){let t=Array.from({length:9},(e,t)=>c()(o()(n()(new Date,t-4)),"dd/MM/yyyy")),a=Array.from({length:9},(e,t)=>0);if(void 0!=e){for(let s of e)if("r\xe9solu"!=s.status){let e=e=>e==c()(o()(new Date(s.end_date)),"dd/MM/yyyy"),n=t.findIndex(e);-1!=n&&a[n]++}}return{week:t,nbr_ticket:a}}function u(e,t){for(let a of t)if(e==a.userName)return a.nbr_ticket;return 0}function h(e){let t=["#FB2C39","#8BC729","#FAC602","#8129C7","#0A122A","#698F3F","#074F57","#9ECE9A","#9AD1D4","#CCDBDC","#0293FC"];return t.splice(0,11-e),t}},7964:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>x});var n=a(8732),i=a(11559),c=a(92058),r=a(57975),o=a(42058),l=a(12307),d=a.n(l),u=a(60057),h=a(74384),g=a.n(h),m=a(86715),j=a(82015);a(15239),a(7179);var _=a(85964),v=a(57455),p=e([i,_,v]);function x({Component:e,pageProps:t}){let[a,s]=(0,j.useState)(!1),[l,h]=(0,j.useState)(!0),[_,p]=(0,j.useState)({project:[{rex:[],ticket:[]}],team:[],user:[],specification:[],selectedProjects:[]}),[x,b]=(0,j.useState)(0);return((0,m.useRouter)(),l)?(0,n.jsx)("div",{children:"En attente"}):(0,n.jsx)("main",{className:g().className,style:{height:"100%"},children:"b"==e.name||"h"==e.name?(0,n.jsx)(e,{...t}):(0,n.jsx)(i.A,{children:(0,n.jsx)(c.n,{children:"b"===e.name?(0,n.jsx)(e,{...t,userData:_}):x>=1280?(0,n.jsxs)(d(),{container:!0,style:{height:"100%"},children:[(0,n.jsx)(d(),{xs:2,item:!0,children:(0,n.jsx)(r.A,{page:e.name,userData:_?.user?_:{},updateUserData:p})}),(0,n.jsxs)(d(),{xs:10,item:!0,children:[(0,n.jsx)(e,{...t,userData:_?.user?_:{},updateUserData:p}),(0,n.jsx)(v.A,{})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.A,{className:"burgerMenu",onClick:()=>s(!0)}),a?(0,n.jsx)(o.A,{page:e.name,userData:_?.user?_:{},setShowMobileNav:s}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(e,{...t,userData:_?.user?_:{},updateUserData:p}),(0,n.jsx)(v.A,{})]})})})})}[i,_,v]=p.then?(await p)():p,s()}catch(e){s(e)}})},85964:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>j});var n=a(32564),i=a(20896),c=a(29713),r=a(84859),o=a(17880),l=a(27245),d=a(65121),u=a(24350),h=a(57722),g=a(16313),m=e([n,i,c,r,o,l,d,u,h]);async function j(){let e=localStorage.getItem("token");if(null==e)return null;var t="",a={user:{avatar:"",bio:"",created_at:"",firstname:"",id:"",lastname:"",email:"",password:"",phone:"",token:""},project:[{id:"",rex:[],ticket:{ticket:[],count:0}}],team:[{}],specification:[{}],selectedProjects:[],stat:{nbrAllTicket:0,nbrTicketByUser:[{userName:"",nbr_ticket:0}],nbrTicket:0,nbrTicketPerWeek:{week:[""],nbr_ticket:[0]},error:!1}};if(e){t=(0,n.jwtDecode)(e).id,a.user=await (0,i.A)(t,e),a.project=await (0,c.A)(t,e),a.specification=await (0,l.A)(t,e),a.team=await (0,r.A)(t,e),a.user&&a.project&&a.specification&&a.team||(window.location.href="/login");let s=a.project[a.project.length-1];for(let s of(a.stat.nbrAllTicket=(await (0,h.A)(t,e)).nbr_ticket,a.project))s.rex=await (0,d.A)(s.id,e),s.ticket=await (0,o.A)(s.id,e);if(null!=s){let n=(0,g.U4)(s?.ticket?.ticket);a.stat.nbrTicketPerWeek.week=n.week,a.stat.nbrTicketPerWeek.nbr_ticket=n.nbr_ticket,a.stat.nbrTicketByUser=await (0,u.A)(t,e,s.id);let i=a.user.firstname+" "+a.user.lastname;a.stat.nbrTicket=(0,g.i$)(i,a.stat.nbrTicketByUser)}return a.user.token=e,a}window.location.href="/login"}[n,i,c,r,o,l,d,u,h]=m.then?(await m)():m,s()}catch(e){s(e)}})},24350:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t,a){try{return(await n.default.get("https://centralized.fr/api/ticket/user/"+e+"/project/"+a,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},57722:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t){try{return(await n.default.get("https://centralized.fr/api/ticket/user/"+e+"/count/",{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},65121:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t){try{let a=await n.default.get("https://centralized.fr/api/rex/project/"+e,{headers:{Authorization:`Bearer ${t}`}});if(a.data.error)return{};return a.data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},20896:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t){try{return(await n.default.get("https://centralized.fr/api/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},29713:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t){try{return(await n.default.get("https://centralized.fr/api/project/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},27245:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t){try{return(await n.default.get("https://centralized.fr/api/cdc/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},84859:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t){try{return(await n.default.get("https://centralized.fr/api/teamuser/user/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},17880:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{A:()=>c});var n=a(1428),i=e([n]);async function c(e,t){try{return(await n.default.get("https://centralized.fr/api/ticket/project/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},24833:()=>{},77103:()=>{},29588:()=>{},7179:()=>{},15239:()=>{}};