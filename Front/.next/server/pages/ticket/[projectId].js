(()=>{var e={};e.id=95,e.ids=[95,888,660],e.modules={98:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>m,default:()=>o,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>p,reportWebVitals:()=>j,routeModule:()=>y,unstable_getServerProps:()=>f,unstable_getServerSideProps:()=>N,unstable_getStaticParams:()=>_,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>g});var i=s(7093),a=s(5244),n=s(1323),d=s(6574),c=s(5551),l=s(2130),u=e([c,l]);[c,l]=u.then?(await u)():u;let o=(0,n.l)(l,"default"),p=(0,n.l)(l,"getStaticProps"),x=(0,n.l)(l,"getStaticPaths"),h=(0,n.l)(l,"getServerSideProps"),m=(0,n.l)(l,"config"),j=(0,n.l)(l,"reportWebVitals"),g=(0,n.l)(l,"unstable_getStaticProps"),v=(0,n.l)(l,"unstable_getStaticPaths"),_=(0,n.l)(l,"unstable_getStaticParams"),f=(0,n.l)(l,"unstable_getServerProps"),N=(0,n.l)(l,"unstable_getServerSideProps"),y=new i.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/ticket/[projectId]",pathname:"/ticket/[projectId]",bundlePath:"",filename:""},components:{App:c.default,Document:d.default},userland:l});r()}catch(e){r(e)}})},3212:(e,t,s)=>{"use strict";s.d(t,{Aw:()=>d,Ej:()=>r,Mg:()=>n,UU:()=>a,nD:()=>i});let r="box_ticket_card",i="urgence_ticket_card",a="name_ticket_card",n="period_ticket_card",d="maj_ticket_card"},1720:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>l});var i=s(997),a=s(6689),n=s(3212);s(5689);var d=s(9648),c=e([d]);d=(c.then?(await c)():c)[0];let u="http://centralized.fr:8000/api/";function l({id:e,title:t,start:s,end:r,urgence:c,updated_at:l,status:o,planningId:p,userData:x,description:h}){let[m,j]=(0,a.useState)({start_date:s,end_date:r,planningId:p,userId:x.user.id,title:t,urgenceId:c,description:h,status:o}),[g,v]=(0,a.useState)(!1),_=new Date,f=new Date(l),N=Number(_)-Number(f);async function y(){let t=await d.default.patch(`${u}ticket/`+e,m,{headers:{Authorization:`Bearer ${x.user.token}`}});200==t.status&&window.location.reload()}async function q(){let t=await d.default.delete(`${u}ticket/`+e,{headers:{Authorization:`Bearer ${x.user.token}`}});200==t.status&&window.location.reload()}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{"data-cy":n.Ej,className:"card",style:{borderLeft:"7px solid "+({0:"#8BC729",1:"#0083E1",2:"#ffa60063",3:"#ff000038"})[m.urgenceId],cursor:"pointer"},onClick:()=>v(!0),children:[i.jsx("h3",{"data-cy":n.UU,children:t}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{"data-cy":n.Mg,children:[s.substring(0,10)," - ",r.substring(0,10)]}),(0,i.jsxs)("p",{"data-cy":n.nD,children:["Status : ",o]})]}),(0,i.jsxs)("p",{"data-cy":n.Aw,className:"card_date",children:["Dernier maj :"," ",(0,i.jsxs)("strong",{children:["il y a ",(N/864e5).toString().split(".")[0]," jours"]})]})]}),g?i.jsx("div",{className:"ticket_modal",children:(0,i.jsxs)("div",{className:"ticket_main_modal",children:[i.jsx("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>v(!1)}),(0,i.jsxs)("div",{className:"ticket_form",children:[i.jsx("h3",{children:"Modifier votre ticket"}),(0,i.jsxs)("div",{className:"same_line",children:[(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Titre *"}),i.jsx("input",{type:"text",placeholder:"Cr\xe9ation du ticket",value:m.title,onChange:e=>j({...m,title:e.target.value})})]}),(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Date de d\xe9but"}),i.jsx("input",{type:"date",placeholder:"Date de d\xe9but",value:m.start_date.substring(0,10),onChange:e=>j({...m,start_date:e.target.value.trim()})})]}),(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Date de fin"}),i.jsx("input",{type:"date",placeholder:"Date de fin",value:m.end_date.substring(0,10),onChange:e=>j({...m,end_date:e.target.value.trim()})})]})]}),(0,i.jsxs)("div",{className:"second_line",children:[(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Status"}),(0,i.jsxs)("select",{onChange:e=>{let t=e.target.value.trim();j({...m,status:t})},required:!0,children:[i.jsx("option",{value:"a faire",selected:"a faire"===m.status,children:"\xc0 faire"}),i.jsx("option",{value:"en cours",selected:"en cours"===m.status,children:"En cours"}),i.jsx("option",{value:"en retard",selected:"en retard"===m.status,children:"En retard"}),i.jsx("option",{value:"r\xe9solu",selected:"r\xe9solu"===m.status,children:"R\xe9solu"})]})]}),(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Urgence"}),(0,i.jsxs)("select",{onChange:e=>{let t=parseInt(e.target.value);j({...m,urgenceId:t})},required:!0,children:[i.jsx("option",{value:0,selected:0===m.urgenceId,children:"Mineur"}),i.jsx("option",{value:1,selected:1===m.urgenceId,children:"Moyen"}),i.jsx("option",{value:2,selected:2===m.urgenceId,children:"Majeur"}),i.jsx("option",{value:3,selected:3===m.urgenceId,children:"Urgent"})]})]})]}),i.jsx("div",{className:"third_line",children:(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Description"}),i.jsx("textarea",{value:m.description,onChange:e=>j({...m,description:e.target.value})})]})}),(0,i.jsxs)("div",{className:"buttn_container",children:[i.jsx("button",{className:"next_btn",onClick:y,children:"Valider"}),i.jsx("button",{className:"delete_btn",onClick:q,children:"Supprimer"})]})]})]})}):null]})}r()}catch(e){r(e)}})},5501:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Z:()=>c});var i=s(997),a=s(6689);s(6031);var n=s(9648),d=e([n]);n=(d.then?(await d)():d)[0];let c=function({userData:e,selectedProject:t}){let[s,r]=(0,a.useState)({start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],planningId:t.ticket.planning[0].id,userId:e.user.id,title:"",urgenceId:0,description:"",status:"a faire"});async function d(){await n.default.post("http://centralized.fr:8000/api/ticket",s,{headers:{Authorization:`Bearer ${e.user.token}`}}),window.location.reload()}return(0,i.jsxs)("div",{className:"ticket_form",children:[i.jsx("h3",{children:"Cr\xe9ez votre ticket"}),(0,i.jsxs)("div",{className:"same_line",children:[(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Titre *"}),i.jsx("input",{type:"text",placeholder:"Cr\xe9ation du ticket",name:"",id:"",onChange:e=>r({...s,title:e.target.value.trim()})})]}),(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Date de d\xe9but"}),i.jsx("input",{type:"date",placeholder:"Date de d\xe9but",onChange:e=>r({...s,start_date:e.target.value.trim()})})]}),(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Date de fin"}),i.jsx("input",{type:"date",placeholder:"Date de fin",onChange:e=>r({...s,end_date:e.target.value.trim()})})]})]}),(0,i.jsxs)("div",{className:"second_line",children:[(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Status"}),(0,i.jsxs)("select",{onChange:e=>r({...s,status:e.target.value.trim()}),required:!0,children:[i.jsx("option",{value:"a faire",children:"\xc0 faire"}),i.jsx("option",{value:"en cours",children:"En cours"}),i.jsx("option",{value:"en retard",children:"En retard"}),i.jsx("option",{value:"r\xe9solu",children:"R\xe9solu"})]})]}),(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Urgence"}),(0,i.jsxs)("select",{onChange:e=>r({...s,urgenceId:parseInt(e.target.value)}),required:!0,children:[i.jsx("option",{value:0,children:"Mineur"}),i.jsx("option",{value:1,children:"Moyen"}),i.jsx("option",{value:2,children:"Majeur"}),i.jsx("option",{value:3,children:"Urgent"})]})]})]}),i.jsx("div",{className:"third_line",children:(0,i.jsxs)("div",{className:"input_grp",children:[i.jsx("p",{children:"Description"}),i.jsx("textarea",{name:"",id:"",onChange:e=>r({...s,description:e.target.value})})]})}),i.jsx("button",{className:"next_btn",onClick:()=>d(),children:"Valider"})]})};r()}catch(e){r(e)}})},6574:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Document});var r=s(997),i=s(6859);function Document(){return(0,r.jsxs)(i.Html,{style:{height:"100%"},children:[r.jsx(i.Head,{}),(0,r.jsxs)("body",{style:{height:"100%",margin:0,padding:0},children:[r.jsx(i.Main,{}),r.jsx(i.NextScript,{})]})]})}},2130:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>x});var i=s(997),a=s(6689),n=s(9414),d=s.n(n),c=s(6146),l=s.n(c);s(8617);var u=s(1720),o=s(5501),p=e([u,o]);function x({userData:e,updateUserData:t}){let[s,r]=(0,a.useState)(!1),[n,c]=(0,a.useState)({}),[p,x]=(0,a.useState)({todo:[],inprogress:[],late:[],done:[]});return(0,a.useEffect)(()=>{let t={todo:[],inprogress:[],late:[],done:[]};for(let s of e.project)if(s.id==new URL(window.location.href).pathname.split("/")[2])for(let e of(c(s),s.ticket.ticket))"a faire"===e.status?t.todo.push(e):"r\xe9solu"===e.status?t.done.push(e):"en retard"===e.status?t.late.push(e):"en cours"===e.status&&t.inprogress.push(e);x(t)},[e]),console.log(p),i.jsx(i.Fragment,{children:(0,i.jsxs)("div",{className:"ticketPage",children:[(0,i.jsxs)("div",{className:"header",children:[i.jsx("h1",{children:"Gestion des tickets"}),i.jsx(d(),{onClick:()=>r(!0),children:i.jsx(l(),{fontSize:"medium",sx:{color:"#000000"}})})]}),i.jsx("hr",{style:{marginLeft:0}}),(0,i.jsxs)("div",{className:"ticket_container",children:[(0,i.jsxs)("div",{className:"debut_container",children:[(0,i.jsxs)("div",{className:"todo_container",children:[i.jsx("h2",{children:"A faire"}),i.jsx("div",{className:"card_container",children:p.todo.map(t=>i.jsx(u.Z,{id:t.id,title:t.title,start:t.start_date,end:t.end_date,urgence:t.urgenceId,status:t.status,planningId:t.planningId,updated_at:t.updated_at,userData:e,description:t.description},t.id))})]}),(0,i.jsxs)("div",{className:"inprogress_container",children:[i.jsx("h2",{children:"En cours"}),i.jsx("div",{className:"card_container",children:p.inprogress.map(t=>i.jsx(u.Z,{id:t.id,title:t.title,start:t.start_date,end:t.end_date,urgence:t.urgenceId,status:t.status,planningId:t.planningId,updated_at:t.updated_at,userData:e,description:t.description},t.id))})]})]}),(0,i.jsxs)("div",{className:"fin_container",children:[(0,i.jsxs)("div",{className:"late_container",children:[i.jsx("h2",{children:"En retard"}),i.jsx("div",{className:"card_container",children:p.late.map(t=>i.jsx(u.Z,{id:t.id,title:t.title,start:t.start_date,end:t.end_date,urgence:t.urgenceId,status:t.status,planningId:t.planningId,updated_at:t.updated_at,userData:e,description:t.description},t.id))})]}),(0,i.jsxs)("div",{className:"done_container",children:[i.jsx("h2",{children:"R\xe9solu"}),i.jsx("div",{className:"card_container",children:p.done.map(t=>i.jsx(u.Z,{id:t.id,title:t.title,start:t.start_date,end:t.end_date,urgence:t.urgenceId,status:t.status,planningId:t.planningId,updated_at:t.updated_at,userData:e,description:t.description},t.id))})]})]})]}),s?i.jsx("div",{className:"ticket_modal",children:(0,i.jsxs)("div",{className:"ticket_main_modal",children:[i.jsx("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>void r(!1)}),i.jsx(o.Z,{userData:e,selectedProject:n})]})}):null]})})}[u,o]=p.then?(await p)():p,r()}catch(e){r(e)}})},5689:()=>{},6031:()=>{},8617:()=>{},6146:e=>{"use strict";e.exports=require("@mui/icons-material/Add")},1191:e=>{"use strict";e.exports=require("@mui/icons-material/FolderCopy")},3365:e=>{"use strict";e.exports=require("@mui/icons-material/Menu")},7986:e=>{"use strict";e.exports=require("@mui/system")},9464:e=>{"use strict";e.exports=require("@mui/system/DefaultPropsProvider")},9590:e=>{"use strict";e.exports=require("@mui/system/colorManipulator")},9826:e=>{"use strict";e.exports=require("@mui/system/createStyled")},1573:e=>{"use strict";e.exports=require("@mui/system/createTheme")},2681:e=>{"use strict";e.exports=require("@mui/system/styleFunctionSx")},3543:e=>{"use strict";e.exports=require("@mui/utils/capitalize")},3559:e=>{"use strict";e.exports=require("@mui/utils/composeClasses")},697:e=>{"use strict";e.exports=require("@mui/utils/deepmerge")},2450:e=>{"use strict";e.exports=require("@mui/utils/elementTypeAcceptingRef")},1416:e=>{"use strict";e.exports=require("@mui/utils/formatMuiErrorMessage")},1392:e=>{"use strict";e.exports=require("@mui/utils/generateUtilityClass")},6122:e=>{"use strict";e.exports=require("@mui/utils/generateUtilityClasses")},515:e=>{"use strict";e.exports=require("@mui/utils/refType")},1080:e=>{"use strict";e.exports=require("@mui/utils/requirePropFactory")},6440:e=>{"use strict";e.exports=require("@mui/utils/useEventCallback")},1954:e=>{"use strict";e.exports=require("@mui/utils/useForkRef")},3157:e=>{"use strict";e.exports=require("@mui/utils/useIsFocusVisible")},9790:e=>{"use strict";e.exports=require("@mui/utils/useTimeout")},8103:e=>{"use strict";e.exports=require("clsx")},6637:e=>{"use strict";e.exports=require("date-fns/addWeeks/index.js")},1712:e=>{"use strict";e.exports=require("date-fns/format/index.js")},1197:e=>{"use strict";e.exports=require("date-fns/startOfISOWeek/index.js")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},580:e=>{"use strict";e.exports=require("prop-types")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},8176:e=>{"use strict";e.exports=require("react-spinners")},4466:e=>{"use strict";e.exports=require("react-transition-group")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9648:e=>{"use strict";e.exports=import("axios")},2880:e=>{"use strict";e.exports=import("jwt-decode")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[562,923,859,967,551],()=>s(98));module.exports=r})();