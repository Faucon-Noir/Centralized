(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{46265:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/team",function(){return s(52870)}])},95191:(e,a,s)=>{"use strict";var t=s(24994);a.A=void 0;var i=t(s(58117)),r=s(74848);a.A=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},12707:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var t=s(74848),i=s(96540);s(47074);var r=s(94335);function n({team:e,userData:a,clickable:s}){let[n,l]=(0,i.useState)([{id:0}]),[o,c]=(0,i.useState)(e),[d,m]=(0,i.useState)(""),[u,h]=(0,i.useState)(!1),[p,x]=(0,i.useState)(!1),g="https://centralized.fr/api/";async function v(e){console.log(e);try{await r.A.delete(`${g}teamuser/`+e.id,{headers:{Authorization:`Bearer ${a.user.token}`}}).then(s=>{200===s.status&&(e.user.id==a.user.id?window.location.reload():l(a=>a.filter(a=>a.id!==e.id)))})}catch(e){console.log(e)}}async function j(e,s){console.log(e,s),await r.A.post(`${g}teamuser/`,{user:e,team:s},{headers:{Authorization:`Bearer ${a.user.token}`}})}async function f(){if(200==(await r.A.patch(`${g}team/`+o.id,o,{headers:{Authorization:`Bearer ${a.user.token}`}})).status)for(let e of d.split(","))!String(e.trim()).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&e.trim().length>0?x(!0):(console.log("ok"),await j(e.trim(),o.id));window.location.reload()}return(0,i.useEffect)(()=>{try{r.A.get(`${g}teamuser/`+e.id,{headers:{Authorization:`Bearer ${a.user.token}`}}).then(e=>{200==e.status&&l(e.data)}),console.log("API URL",g)}catch(e){console.log(e)}},[g,e.id,a.user.token]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"card_team",onClick:()=>s?h(!0):null,children:[(0,t.jsx)("div",{className:"card-header yellow",children:(0,t.jsx)("img",{src:"/media/"+e.avatar,alt:"avatar",className:"avatar",onError:e=>{e.currentTarget.src="/assets/avatar_team.png"}})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h2",{className:"team-name",children:e.name}),(0,t.jsx)("div",{className:"card-footer",children:(0,t.jsxs)("div",{className:"team-info",children:[(0,t.jsx)("i",{className:"icon",children:"\uD83D\uDC65"}),(0,t.jsxs)("span",{children:[n?.length," personnes"]})]})})]})]}),u?(0,t.jsx)("div",{className:"team_modal_card",children:(0,t.jsxs)("div",{className:"team_main_modal_card",children:[(0,t.jsx)("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>h(!1)}),(0,t.jsxs)("div",{className:"team_main_modal_content",children:[(0,t.jsx)("div",{className:"image_container",children:(0,t.jsx)("img",{src:"/media/"+e.avatar,alt:"avatar",className:"avatar",onError:e=>{e.currentTarget.src="/assets/avatar_team.png"}})}),(0,t.jsxs)("div",{className:"right_modal_container",children:[(0,t.jsx)("input",{type:"text",value:o.name,onChange:e=>c({...o,name:e.target.value})}),(0,t.jsx)("div",{className:"user_container",children:n?n.map(e=>(0,t.jsxs)("div",{className:"one_user",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("img",{src:"/assets/icons/user.png",alt:""})," ",": ",e.user.lastname," ",e.user.firstname]}),e.user.id===a.user.id?(0,t.jsx)("p",{children:"(vous)"}):null,(0,t.jsxs)("p",{children:[(0,t.jsx)("img",{src:"/assets/icons/email.png",alt:""})," ",": ",e.user.mail]}),(0,t.jsx)("img",{src:"/assets/icons/bin.png",className:"bin_img",alt:"",onClick:()=>v(e)})]},e.id)):null}),(0,t.jsx)("input",{type:"text",placeholder:"Ajouter des membres (email)",onChange:e=>m(e.target.value)}),(0,t.jsx)("button",{onClick:()=>f(),children:"Termin\xe9"})]})]})]})}):null]})}},45922:(e,a,s)=>{"use strict";s.d(a,{A:()=>c});var t=s(74848),i=s(96540);s(13927);var r=s(94335),n=s(61109),l=s(9897),o=s(30820);let c=function({userData:e,setUserStep:a}){let[s,c]=(0,i.useState)(!1),d=(0,n.A)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),[m,u]=(0,i.useState)({name:"",avatar:"",members:""}),h="https://centralized.fr/api/",p=e=>{let a=e.target.files?.[0];a?["image/png","image/jpeg"].includes(a.type)&&a.size<=2097152?u({...m,avatar:a}):alert("Le fichier doit \xeatre une image de type png ou jpeg et ne doit pas d\xe9passer 2Mo"):console.log("No file selected")};async function x(){let a=new FormData;Object.keys(m).forEach(e=>{"members"!=e&&a.append(e,m[e])});let s=await r.A.post(`${h}team/${e.user.id}`,a,{headers:{Authorization:`Bearer ${e.user.token}`,"Content-Type":"multipart/form-data"}});return 200==s.status&&s.data}async function g(a,s){console.log(a,s),await r.A.post(`${h}teamuser`,{user:a,team:s},{headers:{Authorization:`Bearer ${e.user.token}`}})}async function v(e){e.preventDefault();let a=await x();if(!1!=a)for(let e of m.members.split(","))!String(e.trim()).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&e.trim().length>0?c(!0):(console.log("ok"),await g(e.trim(),a.team.id));window.location.reload()}return(0,t.jsxs)("div",{className:"team_form",children:[(0,t.jsx)("h3",{children:"Cr\xe9ez votre \xe9quipe"}),(0,t.jsxs)("div",{className:"same_line",children:[(0,t.jsxs)("div",{className:"input_grp",children:[(0,t.jsx)("p",{children:"Nom de l'\xe9quipe*"}),(0,t.jsx)("input",{type:"text",placeholder:"Centralized",name:"",id:"",onChange:e=>u({...m,name:e.target.value.trim()})})]}),(0,t.jsxs)("div",{className:"input_grp",children:[(0,t.jsx)("p",{children:"Avatar"}),(0,t.jsxs)(l.A,{sx:{backgroundColor:"#0293FC",borderRadius:"10px",padding:"5px",color:"white",minWidth:"200px",margin:"5px",fontSize:"12px",fontFamily:"myFont"},component:"label",role:void 0,variant:"contained",startIcon:(0,t.jsx)(o.A,{}),children:["Ajouter une image",(0,t.jsx)(d,{type:"file",onChange:e=>p(e)})]})]})]}),(0,t.jsx)("div",{className:"second_line",children:(0,t.jsxs)("div",{className:"input_grp",children:[(0,t.jsx)("p",{children:"Membres"}),(0,t.jsx)("p",{style:{fontSize:"10px"},children:"Ajouter des membres via leurs email s\xe9par\xe9 d'une virgule."}),(0,t.jsx)("input",{type:"input",placeholder:"aaaa@gmail.com, bbbb@gmail.com, cccc@gmail.com",name:"",id:"",onChange:e=>u({...m,members:e.target.value.trim()})}),s?(0,t.jsx)("p",{style:{backgroundColor:"#EF9A9A",padding:"5px",color:"white",borderRadius:"5px",marginTop:"10px",textAlign:"center",width:"60%"},children:"Veuillez entrer un email valide"}):null]})}),(0,t.jsx)("button",{className:"next_btn",onClick:e=>v(e),children:"Suivant"})]})}},52870:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d});var t=s(74848);s(71585);var i=s(80108),r=s(95191),n=s(12707),l=s(96540),o=s(45922),c=s(86715);let d=function({userData:e,updateUserData:a}){let s=(0,c.useRouter)(),[d,m]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{window.location.href.includes("?create=true")&&m(!0)},[]),(0,t.jsxs)("div",{className:"teamPage",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{children:"Mes \xe9quipes"}),(0,t.jsx)(i.A,{"data-cy":"button_create_team",onClick:()=>m(!0),children:(0,t.jsx)(r.A,{fontSize:"medium",sx:{color:"#000000"}})})]}),(0,t.jsx)("hr",{style:{marginLeft:0}}),(0,t.jsx)("div",{className:"teams_container",children:e.team.length>0?e.team.map(a=>(0,t.jsx)(n.A,{team:a?.team,userData:e,clickable:!0},a?.team?.id)):null}),d?(0,t.jsx)("div",{className:"team_modal",children:(0,t.jsxs)("div",{className:"team_main_modal",children:[(0,t.jsx)("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:()=>void(m(!1),s.push("/team"))}),(0,t.jsx)(o.A,{userData:e,setUserStep:0})]})}):null]})}},47074:()=>{},13927:()=>{},71585:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[108,798,636,593,792],()=>a(46265)),_N_E=e.O()}]);