(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{24157:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return t(90025)}])},90025:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>_});var l=t(74848),i=t(6385),s=t(47497),n=t(79309),o=t(86636),r=t(58240),c=t(9897);t(98595);var d=t(54607),m=t(96540),h=t(94590),p=t(94335),u=t(85537);function _({userData:e,updateUserData:a}){let[t,_]=(0,m.useState)({id:"",avatar:{},lastname:"",firstname:"",mail:"",phone:"",bio:"",password:""}),[y,x]=(0,m.useState)(!1),[f,g]=(0,m.useState)(""),b="",j="https://centralized.fr/api/",v=a=>{a.preventDefault(),b=k.id;let l=new FormData;Object.keys(t).forEach(e=>{let a=t[e];void 0!==a&&l.append(e,a)}),p.A.patch(`${j}user/${b}`,l,{headers:{Authorization:`Bearer ${e.user.token}`,"Content-Type":"multipart/form-data"}}).then(function(e){window.location.reload()}).catch(function(e){console.log(e)})},N=localStorage.getItem("token"),k=(0,u.s)(N);return b=k.id,(0,m.useEffect)(()=>{try{p.A.get(`${j}user/${e.user.id}`,{headers:{Authorization:`Bearer ${e.user.token}`}}).then(e=>{_(e.data)})}catch(e){console.log("error",e)}},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"accent"}),(0,l.jsx)("div",{style:{display:"block"},children:(0,l.jsxs)("div",{className:"profile-photo",style:{position:"relative"},children:[(0,l.jsx)(i.A,{"data-cy":"avatar_image_cy",src:f||`/media/${t.avatar}`,sx:{height:"100%",width:"100%"}}),(0,l.jsx)("div",{id:"inner",className:"inner",onClick:()=>{x(!0)},children:(0,l.jsx)(d.A,{"data-cy":"camera_button_cy",sx:{fontSize:"30px"}})}),(0,l.jsx)(s.A,{"data-cy":"modal_avatar_cy",open:y,children:(0,l.jsxs)(n.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(o.A,{"data-cy":"close_button_modal_cy",onClick:()=>{x(!1)},style:{position:"absolute",top:10,right:10},children:(0,l.jsx)(h.A,{})}),(0,l.jsx)(r.A,{"data-cy":"avatar_field_cy",type:"file",onChange:e=>{let a=e.target.files?.[0];a?["image/png","image/jpeg"].includes(a.type)&&a.size<=2097152?(_({...t,avatar:a}),g(URL.createObjectURL(a)),x(!1)):alert("Le fichier doit \xeatre une image de type png ou jpeg et ne doit pas d\xe9passer 2Mo"):console.log("No file selected")}})]})})]})}),(0,l.jsxs)("form",{children:[(0,l.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,l.jsx)("label",{"data-cy":"first_name_label_cy",htmlFor:"firstName",children:"First Name"}),(0,l.jsx)("input",{"data-cy":"first_name_field_cy",className:"textField",placeholder:"Votre pr\xe9nom",value:t?.firstname?t.firstname:"",onChange:e=>_({...t,firstname:e.target.value})}),(0,l.jsx)("label",{"data-cy":"last_name_label_cy",htmlFor:"lastName",children:"Last Name"}),(0,l.jsx)("input",{"data-cy":"last_name_field_cy",className:"textField",placeholder:"Votre nom",value:t?.lastname?t.lastname:"",onChange:e=>_({...t,lastname:e.target.value})}),(0,l.jsx)("label",{"data-cy":"email_label_cy",htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{"data-cy":"email_field_cy",className:"textField",placeholder:"Votre adresse mail",value:t?.mail?t.mail:"",onChange:e=>_({...t,mail:e.target.value})}),(0,l.jsx)("label",{"data-cy":"phone_label_cy",htmlFor:"phone",children:"Phone"}),(0,l.jsx)("input",{"data-cy":"phone_field_cy",className:"textField",placeholder:"Votre num\xe9ro de t\xe9l\xe9phone",value:t?.phone?t.phone:"",onChange:e=>_({...t,phone:e.target.value})}),(0,l.jsx)("label",{"data-cy":"bio_label_cy",htmlFor:"bio",children:"Bio"}),(0,l.jsx)("input",{"data-cy":"bio_field_cy",className:"textField",placeholder:"Une courte description de vous-m\xeame",value:t?.bio&&"null"!==t.bio?t.bio:"",onChange:e=>_({...t,bio:e.target.value})})]}),(0,l.jsx)(c.A,{"data-cy":"save_button_cy",disabled:!t,className:"cta-primary",type:"submit",onClick:e=>v(e),children:"Sauvegarder"})]})]})}},98595:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[108,714,636,593,792],()=>a(24157)),_N_E=e.O()}]);