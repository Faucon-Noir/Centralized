(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{95461:(e,s,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(74994)}])},74994:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>_});var n=a(74848),t=a(96540);let l={display:"flex",flexDirection:"column",justifyItems:"flex-start",alignItems:"center",marginTop:"40px",padding:2,borderRadius:"16px"},i={display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"none",borderRadius:"16px"};var r=a(14959),o=a(79309),c=a(24652),d=a(32730),m=a(13947),u=a(63722),h=a(94335),p=a(86715),x=a(14685),g=a(92058);function j({status:e}){let{isTaskComplete:s,completeTask:a}=(0,g.b)(),[l,i]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{let e;return s||(i(!0),e=setInterval(async()=>{i(!1),clearInterval(e)},2e4)),()=>clearInterval(e)},[s,a]),(0,n.jsxs)(n.Fragment,{children:[l&&"success"===e&&(0,n.jsxs)("div",{className:"req colorSuccess",children:[(0,n.jsx)("p",{children:"Le paiement de l'abonnement \xe0 \xe9t\xe9 effectu\xe9 avec succ\xe8s."}),(0,n.jsx)("p",{children:"Vous pouvez d\xe8s maintenant vous connecter pour d\xe9couvrir Centralized."})]}),l&&"error"===e&&(0,n.jsxs)("div",{className:"req colorError",children:[(0,n.jsx)("p",{children:"Le paiement de l'abonnement n'a pas abouti."}),(0,n.jsx)("p",{children:"Veuillez vous connecter afin de relancer le processus de paiement."})]})]})}a(55572);let v=function(){let e=(0,p.useRouter)(),[s,a]=(0,t.useState)(!1),[v,b]=(0,t.useState)(0),[_,f]=(0,t.useState)(0),[N,y]=(0,t.useState)({lastname:"",firstname:"",mail:"",phone:"",password:"",abonnement:""}),w="https://centralized.fr/api/",{status_stripe:C}=e.query;return(0,n.jsxs)(r.A,{"data-cy":"registration_form",maxWidth:"sm",children:[(0,n.jsx)("h1",{className:"welcome",children:"Bienvenue ✌\uD83C\uDFFB"}),(0,n.jsxs)(o.A,{sx:l,children:[(0,n.jsx)(o.A,{sx:{backgroundColor:"#0293FC",padding:"4px",borderRadius:"16px"},children:(0,n.jsxs)(c.A,{variant:"contained",sx:i,children:[(0,n.jsx)("button",{"data-cy":"register_button",className:"auth_button register_button",onClick:()=>a(!0),style:{color:s?"black":"white",backgroundColor:s?"#FFFFFF":"#0293FC"},children:"Inscription"}),(0,n.jsx)("button",{"data-cy":"login_button",className:"auth_button login_button",onClick:()=>a(!1),style:{color:s?"white":"black",backgroundColor:s?"#0293FC":"#FFFFFF"},children:"Connexion"})]})}),("success"===C||"error"===C)&&(0,n.jsx)(g.n,{children:(0,n.jsx)(j,{status:C})}),(0,n.jsxs)("div",{className:"form_container",children:[s?(0,n.jsxs)("div",{className:"line first-line",children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("label",{htmlFor:"Nom",children:"Pr\xe9nom"}),(0,n.jsx)("input",{"data-cy":"name",type:"text",placeholder:"Jean",onChange:e=>y({...N,firstname:e.target.value})})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("label",{htmlFor:"Nom",children:"Nom"}),(0,n.jsx)("input",{"data-cy":"surname",type:"text",placeholder:"Dupont",onChange:e=>y({...N,lastname:e.target.value})})]})]}):null,(0,n.jsx)("div",{className:"line second-line",children:(0,n.jsxs)("div",{className:"row full",children:[(0,n.jsx)("label",{htmlFor:"Nom",children:"Email"}),(0,n.jsx)("input",{"data-cy":"mail",type:"text",placeholder:"Exemple@gmail.com",onChange:e=>y({...N,mail:e.target.value})})]})}),s?(0,n.jsx)("div",{className:"line third-line",children:(0,n.jsxs)("div",{className:"row ",children:[(0,n.jsx)("label",{htmlFor:"Nom",children:"T\xe9l\xe9phone portable"}),(0,n.jsx)("input",{"data-cy":"phone",type:"Number",placeholder:"+33 7 XX XX XX XX",onChange:e=>y({...N,phone:e.target.value})})]})}):null,s?(0,n.jsx)("div",{className:"line third-line",children:(0,n.jsxs)("div",{className:"row ",children:[(0,n.jsx)("label",{children:"Abonnement"}),(0,n.jsxs)("select",{name:"abonnement",value:N.abonnement,onChange:e=>{y({...N,abonnement:e.target.value})},children:[(0,n.jsx)("option",{value:"",children:"-- Choisissez un Abonnement --"}),(0,n.jsx)("option",{value:"prod_REOcseWjklf70e",children:"Standard : 6€ par mois"}),(0,n.jsx)("option",{value:"prod_REOdmnlK9M7uKW",children:"Premium : 12€ par mois"})]})]})}):null,(0,n.jsx)("div",{className:"line fourth-line",children:(0,n.jsxs)("div",{className:"row ",children:[(0,n.jsx)("label",{"data-cy":"password",htmlFor:"Nom",children:"Choisissez un mot de passe"}),(0,n.jsx)("input",{type:"password",placeholder:"**********",onChange:e=>y({...N,password:e.target.value})})]})}),s?(0,n.jsx)(d.A,{"data-cy":"cgu_button",required:!0,control:(0,n.jsx)(m.A,{}),label:"J'accepte les conditions d'utilisation"}):(0,n.jsx)(u.A,{"data-cy":"forgot_password",href:"/forgotPassword",underline:"hover",style:{color:"#0293FC",fontSize:"12px"},children:"Mot de passe oubli\xe9 ?"}),s?0==_?"":(0,n.jsx)("p",{className:"error_message",children:1==_?"L'adresse mail existe d\xe9j\xe0":"Le compte n'a pas pu \xeatre cr\xe9\xe9"}):0==v?"":(0,n.jsx)("p",{className:"error_message",children:"L'adresse mail ou le mot de passe est incorrect"}),(0,n.jsx)("button",{"data-cy":"submit_button",className:"login_button",onClick:a=>{a.preventDefault(),!1==s?(b(0),h.A.post(`${w}login`,{mail:N.mail.trim(),password:N.password.trim()}).then(function(s){200===s.status&&s.data.success?(localStorage.setItem("token",s.data.token),console.log("logged in"),e.push("/home")):200===s.status&&s.data.session?e.push(s.data.session.url):b(1)}).catch(function(e){console.log(e),b(1)})):(f(0),h.A.post(`${w}register`,{lastname:N.lastname.trim(),firstname:N.firstname.trim(),mail:N.mail.trim(),abonnement:N.abonnement.trim(),phone:N.phone.trim(),password:N.password.trim()}).then(function(s){if(console.log(s),200===s.status){for(let e=0;e<20;e++)(0,x.A)({origin:{x:Math.random()-.1,y:Math.random()-.1}});setTimeout(()=>{e.push(s.data.url)},1e3)}else s.data.error&&"Account existing. Please Login"==s.data.error?f(1):f(2)}).catch(function(e){console.log(e),f(1)}))},children:s?"Je m'inscris":"Je me connecte"})]})]})]})};function b(){return(0,n.jsxs)("div",{className:"login_container",children:[(0,n.jsx)("div",{"data-cy":"white_grid",className:"main_container",children:(0,n.jsx)(v,{})}),(0,n.jsxs)("div",{"data-cy":"blue_grid",className:"logo_container",children:[(0,n.jsxs)("div",{className:"logo",children:[(0,n.jsx)("img",{"data-cy":"white_logo",src:"/assets/logo/WhiteLogoUnder.png",alt:"Logo"}),(0,n.jsx)("p",{"data-cy":"white_logo_label",children:"Travaillez ensemble plus facilement \uD83E\uDD1D"})]}),(0,n.jsxs)("div",{className:"icons",children:[(0,n.jsxs)("div",{className:"common projects",children:[(0,n.jsx)("img",{"data-cy":"project_img",src:"/assets/icons/project.svg",alt:""}),(0,n.jsx)("p",{"data-cy":"projects_label",children:"Mes projets"})]}),(0,n.jsxs)("div",{className:"common plannings",children:[(0,n.jsx)("img",{"data-cy":"planning_img",src:"/assets/icons/planning.svg",alt:""}),(0,n.jsx)("p",{"data-cy":"plannings_label",children:"Mon Planning"})]}),(0,n.jsxs)("div",{"data-cy":"specification_img",className:"common specification",children:[(0,n.jsx)("img",{src:"/assets/icons/specification.svg",alt:""}),(0,n.jsx)("p",{"data-cy":"specification_label",children:"Cahier des charges"})]}),(0,n.jsxs)("div",{className:"common tickets",children:[(0,n.jsx)("img",{"data-cy":"ticket_img",src:"/assets/icons/tickets.svg",alt:""}),(0,n.jsx)("p",{"data-cy":"tickets_label",children:"Tickets"})]}),(0,n.jsxs)("div",{className:"common teams",children:[(0,n.jsx)("img",{"data-cy":"team_img",src:"/assets/icons/teams.svg",alt:""}),(0,n.jsx)("p",{"data-cy":"teams_label",children:"\xc9quipe"})]}),(0,n.jsxs)("div",{className:"common rex",children:[(0,n.jsx)("img",{"data-cy":"rex_img",src:"/assets/icons/rex.svg",alt:""}),(0,n.jsx)("p",{"data-cy":"rex_label",children:"Rex"})]})]})]})]})}a(11117),b.displayName="LoginPage";let _=b},55572:()=>{},11117:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[108,172,636,593,792],()=>s(95461)),_N_E=e.O()}]);