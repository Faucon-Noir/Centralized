(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{24157:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return t(90025)}])},59409:(e,a,t)=>{"use strict";t.d(a,{a:()=>i});var l=t(94624);function i(e){let a=l.createDecipheriv("aes-256-cbc","8C3xn1a@&AEtWhfrnh^BbZU^","r7d%xz2TxDy8UV&66Q75&^G");return console.log("decipher","aes-256-cbc","8C3xn1a@&AEtWhfrnh^BbZU^","r7d%xz2TxDy8UV&66Q75&^G"),a.update(e,"hex","utf8")+a.final("utf8")}},43701:(e,a,t)=>{"use strict";t.d(a,{y:()=>i});var l=t(94624);function i(e){let a=l.createCipheriv("aes-256-cbc","8C3xn1a@&AEtWhfrnh^BbZU^","r7d%xz2TxDy8UV&66Q75&^G");return console.log("cipher","aes-256-cbc","8C3xn1a@&AEtWhfrnh^BbZU^","r7d%xz2TxDy8UV&66Q75&^G"),a.update(e,"utf8","hex")+a.final("hex")}},90025:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>f});var l=t(74848),i=t(6385),n=t(47497),r=t(79309),s=t(86636),o=t(58240),c=t(9897);t(98595);var d=t(54607),h=t(96540),u=t(94590),p=t(94335),m=t(85537),x=t(59409),y=t(43701);function f({userData:e,updateUserData:a}){let[t,f]=(0,h.useState)({id:"",avatar:{},lastname:"",firstname:"",mail:"",phone:"",bio:"",password:""}),[_,b]=(0,h.useState)(!1),[g,v]=(0,h.useState)(""),j="",N="https://centralized.fr/api/",C=a=>{a.preventDefault(),j=k.id;let l=new FormData;Object.keys(t).forEach(e=>{let a=t[e];void 0!==a&&("string"==typeof a&&(a=(0,y.y)(a)),l.append(e,a))}),p.A.patch(`${N}user/${j}`,l,{headers:{Authorization:`Bearer ${e.user.token}`,"Content-Type":"multipart/form-data"}}).then(function(e){window.location.reload()}).catch(function(e){console.log(e)})},A=localStorage.getItem("token"),k=(0,m.s)(A);return j=k.id,(0,h.useEffect)(()=>{try{p.A.get(`${N}user/${e.user.id}`,{headers:{Authorization:`Bearer ${e.user.token}`}}).then(e=>{let a={...e.data};Object.keys(a).forEach(e=>{let t=a[e];"string"==typeof t&&(a[e]=(0,x.a)(t))}),f(a)})}catch(e){console.log("error",e)}},[e]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"accent"}),(0,l.jsx)("div",{style:{display:"block"},children:(0,l.jsxs)("div",{className:"profile-photo",style:{position:"relative"},children:[(0,l.jsx)(i.A,{"data-cy":"avatar_image_cy",src:g||`/media/${t.avatar}`,sx:{height:"100%",width:"100%"}}),(0,l.jsx)("div",{id:"inner",className:"inner",onClick:()=>{b(!0)},children:(0,l.jsx)(d.A,{"data-cy":"camera_button_cy",sx:{fontSize:"30px"}})}),(0,l.jsx)(n.A,{"data-cy":"modal_avatar_cy",open:_,children:(0,l.jsxs)(r.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,l.jsx)(s.A,{"data-cy":"close_button_modal_cy",onClick:()=>{b(!1)},style:{position:"absolute",top:10,right:10},children:(0,l.jsx)(u.A,{})}),(0,l.jsx)(o.A,{"data-cy":"avatar_field_cy",type:"file",onChange:e=>{let a=e.target.files?.[0];a?["image/png","image/jpeg"].includes(a.type)&&a.size<=2097152?(f({...t,avatar:a}),v(URL.createObjectURL(a)),b(!1)):alert("Le fichier doit \xeatre une image de type png ou jpeg et ne doit pas d\xe9passer 2Mo"):console.log("No file selected")}})]})})]})}),(0,l.jsxs)("form",{children:[(0,l.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,l.jsx)("label",{"data-cy":"first_name_label_cy",htmlFor:"firstName",children:"First Name"}),(0,l.jsx)("input",{"data-cy":"first_name_field_cy",className:"textField",placeholder:"Votre pr\xe9nom",value:t?.firstname?t.firstname:"",onChange:e=>f({...t,firstname:e.target.value})}),(0,l.jsx)("label",{"data-cy":"last_name_label_cy",htmlFor:"lastName",children:"Last Name"}),(0,l.jsx)("input",{"data-cy":"last_name_field_cy",className:"textField",placeholder:"Votre nom",value:t?.lastname?t.lastname:"",onChange:e=>f({...t,lastname:e.target.value})}),(0,l.jsx)("label",{"data-cy":"email_label_cy",htmlFor:"email",children:"Email"}),(0,l.jsx)("input",{"data-cy":"email_field_cy",className:"textField",placeholder:"Votre adresse mail",value:t?.mail?t.mail:"",onChange:e=>f({...t,mail:e.target.value})}),(0,l.jsx)("label",{"data-cy":"phone_label_cy",htmlFor:"phone",children:"Phone"}),(0,l.jsx)("input",{"data-cy":"phone_field_cy",className:"textField",placeholder:"Votre num\xe9ro de t\xe9l\xe9phone",value:t?.phone?t.phone:"",onChange:e=>f({...t,phone:e.target.value})}),(0,l.jsx)("label",{"data-cy":"bio_label_cy",htmlFor:"bio",children:"Bio"}),(0,l.jsx)("input",{"data-cy":"bio_field_cy",className:"textField",placeholder:"Une courte description de vous-m\xeame",value:t?.bio&&"null"!==t.bio?t.bio:"",onChange:e=>f({...t,bio:e.target.value})})]}),(0,l.jsx)(c.A,{"data-cy":"save_button_cy",disabled:!t,className:"cta-primary",type:"submit",onClick:e=>C(e),children:"Sauvegarder"})]})]})}},98595:()=>{}},e=>{var a=a=>e(e.s=a);e.O(0,[200,108,338,714,636,593,792],()=>a(24157)),_N_E=e.O()}]);