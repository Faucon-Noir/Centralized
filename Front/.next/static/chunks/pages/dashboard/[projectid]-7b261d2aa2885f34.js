(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{23896:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/[projectid]",function(){return s(78606)}])},35099:(e,t,s)=>{"use strict";var r=s(24994);t.A=void 0;var i=r(s(58117)),a=s(74848);t.A=(0,i.default)((0,a.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},38640:(e,t,s)=>{"use strict";var r=s(24994);t.A=void 0;var i=r(s(58117)),a=s(74848);t.A=(0,i.default)((0,a.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0 15-5-5h3V9h4v4h3z"}),"AssignmentReturned")},72012:(e,t,s)=>{"use strict";var r=s(24994);t.A=void 0;var i=r(s(58117)),a=s(74848);t.A=(0,i.default)((0,a.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19z"}),"Inbox")},27382:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(74848),i=s(96540),a=s(73591);s(53668),s(94577);var n=s(68407),c=s(9171);let l=function({name:e,start_date:t,end_date:s,description:l,color:o}){let d,x;let[h,m]=(0,i.useState)(new Date),j=t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit"}),u=s.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit"});return(0,r.jsxs)("div",{className:"calendar_component",children:[(0,r.jsx)("h2",{className:"planning-title",children:"Derniers projet en cours"}),e?(0,r.jsxs)("div",{className:"calendarBox",children:[(0,r.jsx)(a.Ay,{onChange:m,tileClassName:({date:e,view:r})=>{let i=e.toISOString().slice(0,10);d=t?.toISOString().slice(0,10),x=s?.toISOString().slice(0,10);let a=" color_"+o.substring(1);if("month"===r&&i>=d&&i<=x)return 0===e.getDay()&&i===d||1===e.getDay()&&i===x||i===d&&i===x?"highlight-start highlight-end"+a:1===e.getDay()||i===d?"highlight-start"+a:0===e.getDay()||i===x?"highlight-end"+a:"highlight"+a},next2Label:null,prev2Label:null,locale:"fr-FR"}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"texte_calendar",children:[(0,r.jsxs)("div",{className:"titre_calendar",children:[(0,r.jsx)("h2",{children:e||"test"}),(0,r.jsx)("div",{className:"circlemini",style:{backgroundColor:o}})]}),(0,r.jsxs)("div",{className:"flex_align",children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("p",{children:["du ",j," au"," ",u]})]}),(0,r.jsxs)("div",{className:"flex_align",children:[(0,r.jsx)(n.A,{}),(0,r.jsx)("p",{children:l||"test"})]})]})]}):(0,r.jsx)(r.Fragment,{})]})}},65343:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(74848);s(9986);var i=s(16313),a=s(61133),n=s(90202);function c({id:e,urgenceId:t,title:s,date:c,color:l}){let o=new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"container_title",children:[(0,r.jsx)(a.A,{id:"icon",sx:{color:(0,i.wT)(l)},children:(0,r.jsx)(n.A,{})}),(0,r.jsx)("h2",{className:"task-title",children:s})]}),(0,r.jsxs)("div",{className:"container_infos",children:[(0,r.jsxs)("p",{id:"urgence",children:["Status: ",t," "]}),(0,r.jsxs)("p",{id:"date",children:["post\xe9 le ",o]})]})]})})}},24461:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(74848),i=s(96540),a=s(44731);s(47154);var n=s(26087);let c=function({labels:e,data:t,title:s,hover:c,order:l=0}){let[o,d]=(0,i.useState)({labels:[],datasets:[]}),[x,h]=(0,i.useState)({}),[m,j]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{d({labels:e,datasets:[{label:c,data:t,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}),h({indexAxis:"x",scales:{x:{display:!0,title:{display:!0,text:"Semaine",padding:{top:20,bottom:0},align:"end"},ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,title:{display:!0,text:"tickets ouverts",padding:{top:20,bottom:0},align:"end"}}},responsive:!0,plugins:{title:{display:!0,text:s},legend:{display:!1}},maintainAspectRatio:!1}),j(!1)},[e,t,c,s,l]),m)?(0,r.jsxs)("div",{style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:[(0,r.jsx)(n.A,{}),"Chargements des donn\xe9es..."]}):(0,r.jsx)("div",{className:0!=l?"graph_line graph_line_"+l:"graph_line",children:(0,r.jsx)(a.N1,{data:o,options:x})})}},38279:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var r=s(74848),i=s(96540),a=s(44731);s(47154);var n=s(16313),c=s(26087);let l=function({labels:e,data:t,title:s,hover:l,order:o=0}){let[d,x]=(0,i.useState)({labels:[],datasets:[]}),[h,m]=(0,i.useState)({}),[j,u]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{x({labels:e,datasets:[{label:l,backgroundColor:(0,n.D7)(t.length),data:t,hoverOffset:32}]}),m({responsive:!0,plugins:{title:{display:!0,text:s}}}),u(!1)},[e,t,l,s]),j)?(0,r.jsxs)("div",{style:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:[(0,r.jsx)(c.A,{}),"Chargements des donn\xe9es..."]}):(0,r.jsx)("div",{className:0!=o?"graph_pie graph_pie_"+o:"graph_pie",children:(0,r.jsx)(a.Fq,{data:d,options:h})})}},15329:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(74848);s(70817);var i=s(46874),a=s(58943);function n({children:e,swiperId:t}){return(0,r.jsx)(i.RC,{modules:[a.Vx,a.dK,a.Ze],spaceBetween:10,slidesPerView:1,navigation:{prevEl:`.swiper-button-prev-${t}`,nextEl:`.swiper-button-next-${t}`},breakpoints:{550:{slidesPerView:1.5,spaceBetween:15},640:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:25},820:{slidesPerView:3,spaceBetween:30},1090:{slidesPerView:4,spaceBetween:40},1280:{slidesPerView:4.5,spaceBetween:45},1680:{slidesPerView:5,spaceBetween:50},1980:{slidesPerView:6,spaceBetween:50}},children:e})}},78606:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var r=s(74848),i=s(65343),a=s(27382);s(70817);var n=s(46874),c=s(61133),l=s(80108),o=s(72012),d=s(99106),x=s(35099),h=s(38640),m=s(95191);s(31068),s(53679);var j=s(29965),u=s.n(j),p=s(15329),b=s(96540),v=s(38279),g=s(24461),k=s(85537),w=s(17880),N=s(65121),f=s(24350),_=s(16313),A=s(94335);async function y(e,t){try{return(await A.A.get("https://centralized.fr/api/project/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}var T=s(19628);async function P(e,t,s){try{return(await A.A.get("https://centralized.fr/api/ticket/user/"+e+"/project/"+s+"/status",{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}async function B(e,t,s){try{return(await A.A.get("https://centralized.fr/api/ticket/user/"+e+"/project/"+s+"/status/me",{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}async function S(e,t){let s=localStorage.getItem("token");var r="",i={project:{name:"",start_date:"",end_date:"",color:0,description:"",id:""},cdc:{},rex:{rexProbleme:"",rexReussite:"",rexAmelioration:"",isForm:!1},ticket:{ticket:[],count:0},userTeam:[{}],stat:{nbrTicketByUser:[{userName:"",nbr_ticket:0}],nbrTicketPerWeek:{week:[""],nbr_ticket:[0]},nbrTicketByStatus:[{status:"",nbr_ticket:0}],nbrTicketOpenProject:0,nbrTicketProject:0,nbrMyTicketOpenProject:0,nbrMyTicketProject:0}};if(s){r=(0,k.s)(s).id;let t=await y(e,s);i.project=t.projectData,i.cdc=t.cdcData,i.userTeam=await (0,T.A)(e,s);let a=await (0,N.A)(e,s);0!=Object.keys(a).length?(i.rex.rexProbleme=a.answer1,i.rex.rexReussite=a.answer2,i.rex.rexAmelioration=a.answer3):i.rex.isForm=!0,i.ticket=await (0,w.A)(e,s);let n=(0,_.U4)(i.ticket?.ticket);for(let t of(i.stat.nbrTicketPerWeek.week=n.week,i.stat.nbrTicketPerWeek.nbr_ticket=n.nbr_ticket,i.stat.nbrTicketByStatus=await P(r,s,e),i.stat.nbrTicketByStatus)){let e=Number(t.nbr_ticket);"r\xe9solu"!=t.status&&(i.stat.nbrTicketOpenProject=i.stat.nbrTicketOpenProject+e),i.stat.nbrTicketProject=i.stat.nbrTicketProject+e}for(let t of(await B(r,s,e))){let e=Number(t.nbr_ticket);"r\xe9solu"!=t.status&&(i.stat.nbrMyTicketOpenProject=i.stat.nbrMyTicketOpenProject+e),i.stat.nbrMyTicketProject=i.stat.nbrMyTicketProject+e}i.stat.nbrTicketByUser=await (0,f.A)(r,s,e)}return i}function R({avatar:e,firstName:t,lastName:s,grade:i,bio:a}){return(0,r.jsxs)("div",{className:"card_user",children:[(0,r.jsx)("div",{className:"card-header yellow",children:(0,r.jsx)("img",{src:"/media/"+e,alt:"avatar",className:"avatar",onError:e=>{e.currentTarget.src="/assets/avatar_team.png"}})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h2",{className:"user-name",children:`${t} ${s}`}),(0,r.jsx)("div",{className:"card-footer",children:(0,r.jsx)("div",{className:"user-info"})})]})]})}s(81781);var C=s(5631),D=s(92058);s(86994);let z=function({userData:e,RexData:t,idProject:s,color:i}){let{startTask:a}=(0,D.b)(),[n,l]=(0,b.useState)({rexProbleme:t.rexProbleme,rexReussite:t.rexReussite,rexAmelioration:t.rexAmelioration,isForm:t.isForm});async function o(){await (0,C.A)(n)&&(await A.A.post("https://centralized.fr/api/rex",{project:s,answer1:n.rexReussite.trim(),answer2:n.rexProbleme.trim(),answer3:n.rexAmelioration.trim()},{headers:{Authorization:`Bearer ${e.user.token}`}}),a())}return(0,b.useEffect)(()=>{l(t)},[e,t]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"rexCard",children:[(0,r.jsx)("div",{className:"enteterexcard",children:(0,r.jsxs)("div",{className:"titrerexcard",children:[(0,r.jsx)(c.A,{sx:{color:(0,_.wT)(i),height:"35px",width:"35px"},children:(0,r.jsx)(d.A,{fontSize:"large"})}),(0,r.jsx)("h2",{children:"Mon Rex"})]})}),n.isForm?(0,r.jsxs)("form",{className:"FormRex",onSubmit:e=>o(),children:[(0,r.jsxs)("div",{className:"input_form",children:[(0,r.jsx)("label",{htmlFor:"rexReussite",children:"Ce qui s'est bien pass\xe9?"}),(0,r.jsx)("textarea",{id:"rexReussite",name:"rexReussite",className:"textarea",required:!0,onChange:e=>l({...n,rexReussite:e.target.value})})]}),(0,r.jsxs)("div",{className:"input_form",children:[(0,r.jsx)("label",{htmlFor:"rexProbleme",children:"Ce qui s'est mal pass\xe9?"}),(0,r.jsx)("textarea",{id:"rexProbleme",name:"rexProbleme",className:"textarea",required:!0,onChange:e=>l({...n,rexProbleme:e.target.value})})]}),(0,r.jsxs)("div",{className:"input_form",children:[(0,r.jsx)("label",{htmlFor:"rexAmelioration",children:"Ce qui pourrait \xeatre am\xe9lior\xe9?"}),(0,r.jsx)("textarea",{id:"rexAmelioration",name:"rexAmelioration",className:"textarea",required:!0,onChange:e=>l({...n,rexAmelioration:e.target.value})})]}),(0,r.jsx)("div",{className:"DivButtonRex",children:(0,r.jsx)("button",{className:"ButtonRex",onClick:o,disabled:!n.rexReussite||!n.rexProbleme||!n.rexAmelioration,children:"G\xe9n\xe9rer"})})]}):(0,r.jsxs)("div",{className:"showRex",children:[(0,r.jsxs)("div",{className:"showRexProps",children:[(0,r.jsx)("h3",{children:"Ce qu'il c'est bien pass\xe9 ?"}),(0,r.jsx)("p",{children:n?.rexReussite})]}),(0,r.jsxs)("div",{className:"showRexProps",children:[(0,r.jsx)("h3",{children:"Ce qui s'est mal pass\xe9 ?"}),(0,r.jsx)("p",{children:n?.rexProbleme})]}),(0,r.jsxs)("div",{className:"showRexProps",children:[(0,r.jsx)("h3",{children:"Ce qui pourrait \xeatre am\xe9lior\xe9 ?"}),(0,r.jsx)("p",{children:n?.rexAmelioration})]})]})]})})};function F({userData:e,updateUserData:t}){let[s,j]=(0,b.useState)(0),[k,w]=(0,b.useState)({project:{name:"",start_date:"",end_date:"",color:0,description:"",id:""},cdc:{},rex:{rexProbleme:"",rexReussite:"",rexAmelioration:"",isForm:!1},ticket:{count:0,ticket:[{}]},userTeam:[{}],stat:{nbrTicketByUser:[{userName:"",nbr_ticket:0}],nbrTicketPerWeek:{week:[""],nbr_ticket:[0]},nbrTicketByStatus:[{status:"",nbr_ticket:0}],nbrTicketOpenProject:0,nbrTicketProject:0,nbrMyTicketOpenProject:0,nbrMyTicketProject:0}});return(0,b.useEffect)(()=>{let e=()=>j(window.innerWidth);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,b.useEffect)(()=>{S(new URL(window.location.href).pathname.split("/")[2],e).then(e=>{w(e)})},[e]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"right_container",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"Presentation",children:(0,r.jsx)("h1",{children:k?.project?k.project.name:""})}),(0,r.jsxs)("div",{className:"mobile",children:[k?.stat?(0,r.jsxs)("div",{className:"stat",children:[(0,r.jsx)("h2",{children:"Statistique du dernier projet"}),(0,r.jsxs)("div",{className:"graph_div",children:[(0,r.jsxs)("div",{className:"text_stat",children:[k?.stat?.nbrTicketByUser?(0,r.jsx)(v.A,{labels:k.stat.nbrTicketByUser.map(e=>e.userName),data:k.stat.nbrTicketByUser.map(e=>e.nbr_ticket),title:"Nombre de ticket non fini par utilisateur",hover:"Nombre de ticket"}):null,k?.stat?.nbrTicketByStatus?(0,r.jsx)(v.A,{labels:k.stat.nbrTicketByStatus.map(e=>e.status),data:k.stat.nbrTicketByStatus.map(e=>e.nbr_ticket),title:"Nombre de ticket par \xe9tat",hover:"Nombre de ticket",order:2}):null]}),(0,r.jsxs)("div",{className:"text_stat stat_container_1",children:[(0,r.jsxs)("div",{className:"stat_container",children:[(0,r.jsx)("p",{children:"Total des tickets ouverts"}),(0,r.jsxs)("div",{className:"icon_container",children:[(0,r.jsx)(c.A,{sx:{color:(0,_.wT)(k.project.color),height:"35px",width:"35px",marginBottom:"10px"},children:(0,r.jsx)(x.A,{fontSize:"large"})}),(0,r.jsx)("h3",{children:k?.stat?.nbrTicketOpenProject?k.stat.nbrTicketOpenProject:0})]})]}),(0,r.jsxs)("div",{className:"stat_container",children:[(0,r.jsx)("p",{children:"Vos tickets ouverts"}),(0,r.jsxs)("div",{className:"icon_container",children:[(0,r.jsx)(c.A,{sx:{color:(0,_.wT)(k.project.color),height:"35px",width:"35px",marginBottom:"10px"},children:(0,r.jsx)(h.A,{fontSize:"large"})}),(0,r.jsx)("h3",{children:k?.stat?.nbrMyTicketOpenProject?k.stat.nbrMyTicketOpenProject:0})]})]})]}),k?.stat?.nbrTicketByUser?(0,r.jsx)(g.A,{labels:k.stat.nbrTicketPerWeek.week,data:k.stat.nbrTicketPerWeek.nbr_ticket,title:"Nombre de tickets ouverts par semaine",hover:"Nombre de tickets"}):null,(0,r.jsxs)("div",{className:"text_stat stat_container_2",children:[(0,r.jsxs)("div",{className:"stat_container",children:[(0,r.jsx)("p",{children:"Total des tickets"}),(0,r.jsxs)("div",{className:"icon_container",children:[(0,r.jsx)(c.A,{sx:{color:(0,_.wT)(k.project.color),height:"35px",width:"35px",marginBottom:"10px"},children:(0,r.jsx)(o.A,{fontSize:"large"})}),(0,r.jsx)("h3",{children:k?.stat?.nbrTicketProject?k.stat.nbrTicketProject:0})]})]}),(0,r.jsxs)("div",{className:"stat_container",children:[(0,r.jsx)("p",{children:"Vos tickets"}),(0,r.jsxs)("div",{className:"icon_container",children:[(0,r.jsx)(c.A,{className:"icon_stat",sx:{color:(0,_.wT)(k.project.color),height:"35px",width:"35px",marginBottom:"10px"},children:(0,r.jsx)(d.A,{fontSize:"large"})}),(0,r.jsx)("h3",{children:k?.stat?.nbrMyTicketProject?k.stat.nbrMyTicketProject:0})]})]})]})]})]}):(0,r.jsx)(r.Fragment,{}),(0,r.jsxs)("div",{className:"BlocDouble",children:[(0,r.jsx)("div",{className:"calendar_container",children:(0,r.jsx)(a.A,{name:k.project?k.project.name:"",start_date:k.project?new Date(k.project.start_date):new Date,end_date:k.project?new Date(k.project.end_date):new Date,description:k.project?k.project.description:"",color:(0,_.wT)(k.project.color)})}),(0,r.jsxs)("div",{className:"DernierTicket",children:[(0,r.jsx)("div",{className:"entetedernierticket",children:(0,r.jsx)("h2",{children:"Derniers tickets"})}),k.ticket.count>0?k.ticket.ticket.filter((e,t)=>t<3).map(e=>(0,r.jsx)(i.A,{id:e.id,title:e.title,urgenceId:e.status,date:e.start_date,color:k.project.color},e.id)):(0,r.jsx)(r.Fragment,{children:" Aucun ticket n'est ouvert"})]})]}),(0,r.jsx)("div",{className:"BlocDouble second_line",children:(0,r.jsxs)("div",{className:"DernierTicket",children:[(0,r.jsx)("h2",{children:"Derniers retours d'exp\xe9riences"}),(0,r.jsx)(z,{userData:e,RexData:k.rex,idProject:k.project.id,color:k.project.color})]})})]}),(0,r.jsxs)("div",{className:"MyTeam",children:[(0,r.jsxs)("div",{className:"Entete",children:[(0,r.jsxs)("div",{className:"TitleProjetCards",children:[(0,r.jsx)("h2",{children:"Membres de l'\xe9quipe"}),(0,r.jsx)(l.A,{children:(0,r.jsx)(m.A,{fontSize:"medium",sx:{color:"#000000"}})})]}),(0,r.jsxs)("div",{className:"fleches",children:[(0,r.jsx)(u(),{src:"/assets/chevron-left.svg",alt:"",width:20,height:20,className:"swiper-button-prev swiper-button-prev-2 fleche"}),(0,r.jsx)(u(),{src:"/assets/chevron-right.svg",alt:"",width:20,height:20,className:"swiper-button-next swiper-button-next-2 fleche"})]})]}),(0,r.jsx)(p.A,{swiperId:2,children:(0,r.jsx)("div",{className:"ProjetCards",children:k?.userTeam?k?.userTeam.map(e=>r.jsx(n.qr,{children:r.jsx(R,{avatar:e.avatar,firstName:e.user_firstname,lastName:e.user_lastname,bio:e.user_bio,grade:0})},e.id)):null})})]})]})})})}},19628:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(94335);async function i(e,t){try{return(await r.A.get("https://centralized.fr/api/teamuser/project/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}},5631:(e,t,s)=>{"use strict";async function r(e){let t=["template","status"];for(let s in e)if(!t.includes(s)&&""==e[s])return!1;return!0}s.d(t,{A:()=>r})},94577:()=>{},9986:()=>{},81781:()=>{},86994:()=>{},31068:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[201,108,699,39,636,593,792],()=>t(23896)),_N_E=e.O()}]);