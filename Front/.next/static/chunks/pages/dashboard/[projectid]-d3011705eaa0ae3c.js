(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{23896:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/[projectid]",function(){return r(78606)}])},27382:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(74848),a=r(96540),i=r(73591);r(53668),r(94577);var n=r(68407),c=r(9171);let l=function({name:e,start_date:t,end_date:r,description:l,color:o}){let d,x;let[h,u]=(0,a.useState)(new Date),j=t.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit"}),m=r.toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"2-digit"});return(0,s.jsxs)("div",{className:"calendar_component",children:[(0,s.jsx)("h2",{className:"planning-title",children:"Derniers projet en cours"}),e?(0,s.jsxs)("div",{className:"calendarBox",children:[(0,s.jsx)(i.Ay,{onChange:u,tileClassName:({date:e,view:s})=>{let a=e.toISOString().slice(0,10);d=t?.toISOString().slice(0,10),x=r?.toISOString().slice(0,10);let i=" color_"+o.substring(1);if("month"===s&&a>=d&&a<=x)return 0===e.getDay()&&a===d||1===e.getDay()&&a===x||a===d&&a===x?"highlight-start highlight-end"+i:1===e.getDay()||a===d?"highlight-start"+i:0===e.getDay()||a===x?"highlight-end"+i:"highlight"+i},next2Label:null,prev2Label:null,locale:"fr-FR"}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"texte_calendar",children:[(0,s.jsxs)("div",{className:"titre_calendar",children:[(0,s.jsx)("h2",{children:e||"test"}),(0,s.jsx)("div",{className:"circlemini",style:{backgroundColor:o}})]}),(0,s.jsxs)("div",{className:"flex_align",children:[(0,s.jsx)(c.A,{}),(0,s.jsxs)("p",{children:["du ",j," au"," ",m]})]}),(0,s.jsxs)("div",{className:"flex_align",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("p",{children:l||"test"})]})]})]}):(0,s.jsx)(s.Fragment,{})]})}},65343:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(74848);r(9986);var a=r(16313),i=r(61133),n=r(90202);function c({id:e,urgenceId:t,title:r,date:c,color:l}){let o=new Date(c).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"container_title",children:[(0,s.jsx)(i.A,{id:"icon",sx:{color:(0,a.wT)(l)},children:(0,s.jsx)(n.A,{})}),(0,s.jsx)("h2",{className:"task-title",children:r})]}),(0,s.jsxs)("div",{className:"container_infos",children:[(0,s.jsxs)("p",{id:"urgence",children:["Status: ",t," "]}),(0,s.jsxs)("p",{id:"date",children:["post\xe9 le ",o]})]})]})})}},24461:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(74848),a=r(96540),i=r(44731);r(47154);let n=function({labels:e,data:t,title:r,hover:n,order:c=0}){let[l,o]=(0,a.useState)({labels:[],datasets:[]}),[d,x]=(0,a.useState)({}),[h,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{o({labels:e,datasets:[{label:n,data:t,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]}),x({indexAxis:"x",scales:{x:{display:!0,title:{display:!0,text:"Semaine",padding:{top:20,bottom:0},align:"end"},ticks:{maxRotation:45,minRotation:45}},y:{beginAtZero:!0,title:{display:!0,text:"tickets ouverts",padding:{top:20,bottom:0},align:"end"}}},responsive:!0,plugins:{title:{display:!0,text:r},legend:{display:!1}},maintainAspectRatio:!1}),u(!1)},[e,t,n,r,c]),h)?(0,s.jsx)("div",{children:"Chargement des donn\xe9es..."}):(0,s.jsx)("div",{className:0!=c?"graph_line graph_line_"+c:"graph_line",children:(0,s.jsx)(i.N1,{data:l,options:d})})}},38279:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(74848),a=r(96540),i=r(44731);r(47154);var n=r(16313);let c=function({labels:e,data:t,title:r,hover:c,order:l=0}){let[o,d]=(0,a.useState)({labels:[],datasets:[]}),[x,h]=(0,a.useState)({}),[u,j]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{d({labels:e,datasets:[{label:c,backgroundColor:(0,n.D7)(t.length),data:t,hoverOffset:32}]}),h({responsive:!0,plugins:{title:{display:!0,text:r}}}),j(!1)},[e,t,c,r]),u)?(0,s.jsx)("div",{children:"Chargement des donn\xe9es..."}):(0,s.jsx)("div",{className:0!=l?"graph_pie graph_pie_"+l:"graph_pie",children:(0,s.jsx)(i.Fq,{data:o,options:x})})}},15329:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(74848);r(70817);var a=r(46874),i=r(58943);function n({children:e,swiperId:t}){return(0,s.jsx)(a.RC,{modules:[i.Vx,i.dK,i.Ze],spaceBetween:10,slidesPerView:1,navigation:{prevEl:`.swiper-button-prev-${t}`,nextEl:`.swiper-button-next-${t}`},breakpoints:{550:{slidesPerView:1.5,spaceBetween:15},640:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:2.5,spaceBetween:25},820:{slidesPerView:3,spaceBetween:30},1090:{slidesPerView:4,spaceBetween:40},1280:{slidesPerView:4.5,spaceBetween:45},1680:{slidesPerView:5,spaceBetween:50},1980:{slidesPerView:6,spaceBetween:50}},children:e})}},78606:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(74848),a=r(65343),i=r(27382);r(70817);var n=r(46874),c=r(80108),l=r(95191);r(31068),r(53679);var o=r(29965),d=r.n(o),x=r(15329),h=r(96540),u=r(38279),j=r(24461),m=r(85537),p=r(17880),b=r(65121),k=r(24350),v=r(16313),g=r(94335);async function N(e,t){try{return(await g.A.get("https://centralized.fr/api/project/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}var w=r(19628);async function _(e,t,r){try{return(await g.A.get("https://centralized.fr/api/ticket/user/"+e+"/project/"+r+"/status",{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}async function f(e,t,r){try{return(await g.A.get("https://centralized.fr/api/ticket/user/"+e+"/project/"+r+"/status/me",{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}async function y(e,t){let r=localStorage.getItem("token");var s="",a={project:{name:"",start_date:"",end_date:"",color:0,description:"",id:""},cdc:{},rex:{rexProbleme:"",rexReussite:"",rexAmelioration:"",isForm:!1},ticket:{ticket:[],count:0},userTeam:[{}],stat:{nbrTicketByUser:[{userName:"",nbr_ticket:0}],nbrTicketPerWeek:{week:[""],nbr_ticket:[0]},nbrTicketByStatus:[{status:"",nbr_ticket:0}],nbrTicketOpenProject:0,nbrTicketProject:0,nbrMyTicketOpenProject:0,nbrMyTicketProject:0}};if(r){s=(0,m.s)(r).id;let t=await N(e,r);a.project=t.projectData,a.cdc=t.cdcData,a.userTeam=await (0,w.A)(e,r);let i=await (0,b.A)(e,r);0!=Object.keys(i).length?(a.rex.rexProbleme=i.answer1,a.rex.rexReussite=i.answer2,a.rex.rexAmelioration=i.answer3):a.rex.isForm=!0,a.ticket=await (0,p.A)(e,r);let n=(0,v.U4)(a.ticket?.ticket);for(let t of(a.stat.nbrTicketPerWeek.week=n.week,a.stat.nbrTicketPerWeek.nbr_ticket=n.nbr_ticket,a.stat.nbrTicketByStatus=await _(s,r,e),a.stat.nbrTicketByStatus)){let e=Number(t.nbr_ticket);"r\xe9solu"!=t.status&&(a.stat.nbrTicketOpenProject=a.stat.nbrTicketOpenProject+e),a.stat.nbrTicketProject=a.stat.nbrTicketProject+e}for(let t of(await f(s,r,e))){let e=Number(t.nbr_ticket);"r\xe9solu"!=t.status&&(a.stat.nbrMyTicketOpenProject=a.stat.nbrMyTicketOpenProject+e),a.stat.nbrMyTicketProject=a.stat.nbrMyTicketProject+e}a.stat.nbrTicketByUser=await (0,k.A)(s,r,e)}return a}function P({avatar:e,firstName:t,lastName:r,grade:a,bio:i}){return(0,s.jsxs)("div",{className:"card_user",children:[(0,s.jsx)("div",{className:"card-header yellow",children:(0,s.jsx)("img",{src:"/media/"+e,alt:"avatar",className:"avatar",onError:e=>{e.currentTarget.src="/assets/avatar_team.png"}})}),(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h2",{className:"user-name",children:`${t} ${r}`}),(0,s.jsx)("div",{className:"card-footer",children:(0,s.jsx)("div",{className:"user-info"})})]})]})}r(81781);var T=r(5631),A=r(92058),B=r(61133),S=r(99106);r(86994);let R=function({userData:e,RexData:t,idProject:r,color:a}){let{startTask:i}=(0,A.b)(),[n,c]=(0,h.useState)({rexProbleme:t.rexProbleme,rexReussite:t.rexReussite,rexAmelioration:t.rexAmelioration,isForm:t.isForm});async function l(){await (0,T.A)(n)&&(await g.A.post("https://centralized.fr/api/rex",{project:r,answer1:n.rexReussite.trim(),answer2:n.rexProbleme.trim(),answer3:n.rexAmelioration.trim()},{headers:{Authorization:`Bearer ${e.user.token}`}}),i())}return(0,h.useEffect)(()=>{c(t)},[e,t]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"rexCard",children:[(0,s.jsx)("div",{className:"enteterexcard",children:(0,s.jsxs)("div",{className:"titrerexcard",children:[(0,s.jsx)(B.A,{sx:{color:(0,v.wT)(a),height:"35px",width:"35px"},children:(0,s.jsx)(S.A,{fontSize:"large"})}),(0,s.jsx)("h2",{children:"Mon Rex"})]})}),n.isForm?(0,s.jsxs)("form",{className:"FormRex",onSubmit:e=>l(),children:[(0,s.jsxs)("div",{className:"input_form",children:[(0,s.jsx)("label",{htmlFor:"rexReussite",children:"Ce qui s'est bien pass\xe9?"}),(0,s.jsx)("textarea",{id:"rexReussite",name:"rexReussite",className:"textarea",required:!0,onChange:e=>c({...n,rexReussite:e.target.value})})]}),(0,s.jsxs)("div",{className:"input_form",children:[(0,s.jsx)("label",{htmlFor:"rexProbleme",children:"Ce qui s'est mal pass\xe9?"}),(0,s.jsx)("textarea",{id:"rexProbleme",name:"rexProbleme",className:"textarea",required:!0,onChange:e=>c({...n,rexProbleme:e.target.value})})]}),(0,s.jsxs)("div",{className:"input_form",children:[(0,s.jsx)("label",{htmlFor:"rexAmelioration",children:"Ce qui pourrait \xeatre am\xe9lior\xe9?"}),(0,s.jsx)("textarea",{id:"rexAmelioration",name:"rexAmelioration",className:"textarea",required:!0,onChange:e=>c({...n,rexAmelioration:e.target.value})})]}),(0,s.jsx)("div",{className:"DivButtonRex",children:(0,s.jsx)("button",{className:"ButtonRex",onClick:l,disabled:!n.rexReussite||!n.rexProbleme||!n.rexAmelioration,children:"G\xe9n\xe9rer"})})]}):(0,s.jsxs)("div",{className:"showRex",children:[(0,s.jsxs)("div",{className:"showRexProps",children:[(0,s.jsx)("h3",{children:"Ce qu'il c'est bien pass\xe9 ?"}),(0,s.jsx)("p",{children:n?.rexReussite})]}),(0,s.jsxs)("div",{className:"showRexProps",children:[(0,s.jsx)("h3",{children:"Ce qui s'est mal pass\xe9 ?"}),(0,s.jsx)("p",{children:n?.rexProbleme})]}),(0,s.jsxs)("div",{className:"showRexProps",children:[(0,s.jsx)("h3",{children:"Ce qui pourrait \xeatre am\xe9lior\xe9 ?"}),(0,s.jsx)("p",{children:n?.rexAmelioration})]})]})]})})};function D({userData:e,updateUserData:t}){let[r,o]=(0,h.useState)(0),[m,p]=(0,h.useState)({project:{name:"",start_date:"",end_date:"",color:0,description:"",id:""},cdc:{},rex:{rexProbleme:"",rexReussite:"",rexAmelioration:"",isForm:!1},ticket:{count:0,ticket:[{}]},userTeam:[{}],stat:{nbrTicketByUser:[{userName:"",nbr_ticket:0}],nbrTicketPerWeek:{week:[""],nbr_ticket:[0]},nbrTicketByStatus:[{status:"",nbr_ticket:0}],nbrTicketOpenProject:0,nbrTicketProject:0,nbrMyTicketOpenProject:0,nbrMyTicketProject:0}});return(0,h.useEffect)(()=>{let e=()=>o(window.innerWidth);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,h.useEffect)(()=>{y(new URL(window.location.href).pathname.split("/")[2],e).then(e=>{p(e)})},[e]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"right_container",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"Presentation",children:(0,s.jsx)("h1",{children:m?.project?m.project.name:""})}),(0,s.jsxs)("div",{className:"mobile",children:[m?.stat?(0,s.jsxs)("div",{className:"stat",children:[(0,s.jsx)("h2",{children:"Statistique du dernier projet"}),(0,s.jsxs)("div",{className:"graph_div",children:[(0,s.jsxs)("div",{className:"text_stat",children:[m?.stat?.nbrTicketByUser?(0,s.jsx)(u.A,{labels:m.stat.nbrTicketByUser.map(e=>e.userName),data:m.stat.nbrTicketByUser.map(e=>e.nbr_ticket),title:"Nombre de ticket non fini par utilisateur",hover:"Nombre de ticket"}):null,m?.stat?.nbrTicketByStatus?(0,s.jsx)(u.A,{labels:m.stat.nbrTicketByStatus.map(e=>e.status),data:m.stat.nbrTicketByStatus.map(e=>e.nbr_ticket),title:"Nombre de ticket par \xe9tat",hover:"Nombre de ticket",order:2}):null]}),(0,s.jsxs)("div",{className:"text_stat stat_container_1",children:[(0,s.jsxs)("div",{className:"stat_container",children:[(0,s.jsx)("p",{children:"Vous avez"}),(0,s.jsx)("h3",{children:m?.stat?.nbrMyTicketProject?m.stat.nbrMyTicketProject:0}),(0,s.jsx)("p",{children:"tickets en tout sur ce projet"})]}),(0,s.jsxs)("div",{className:"stat_container",children:[(0,s.jsx)("p",{children:"Vous avez"}),(0,s.jsx)("h3",{children:m?.stat?.nbrMyTicketOpenProject?m.stat.nbrMyTicketOpenProject:0}),(0,s.jsx)("p",{children:"tickets ouverts sur ce projet"})]})]}),m?.stat?.nbrTicketByUser?(0,s.jsx)(j.A,{labels:m.stat.nbrTicketPerWeek.week,data:m.stat.nbrTicketPerWeek.nbr_ticket,title:"Nombre de tickets ouverts par semaine",hover:"Nombre de tickets"}):null,(0,s.jsxs)("div",{className:"text_stat stat_container_2",children:[(0,s.jsxs)("div",{className:"stat_container",children:[(0,s.jsx)("p",{children:"Il y a"}),(0,s.jsx)("h3",{children:m?.stat?.nbrTicketProject?m.stat.nbrTicketProject:0}),(0,s.jsx)("p",{children:"tickets en tout sur ce projet"})]}),(0,s.jsxs)("div",{className:"stat_container",children:[(0,s.jsx)("p",{children:"Il y a"}),(0,s.jsx)("h3",{children:m?.stat?.nbrTicketOpenProject?m.stat.nbrTicketOpenProject:0}),(0,s.jsx)("p",{children:"tickets ouverts sur ce projet"})]})]})]})]}):(0,s.jsx)(s.Fragment,{}),(0,s.jsxs)("div",{className:"BlocDouble",children:[(0,s.jsx)("div",{className:"calendar_container",children:(0,s.jsx)(i.A,{name:m.project?m.project.name:"",start_date:m.project?new Date(m.project.start_date):new Date,end_date:m.project?new Date(m.project.end_date):new Date,description:m.project?m.project.description:"",color:(0,v.wT)(m.project.color)})}),(0,s.jsxs)("div",{className:"DernierTicket",children:[(0,s.jsx)("div",{className:"entetedernierticket",children:(0,s.jsx)("h2",{children:"Derniers tickets"})}),m.ticket.count>0?m.ticket.ticket.filter((e,t)=>t<3).map(e=>(0,s.jsx)(a.A,{id:e.id,title:e.title,urgenceId:e.status,date:e.start_date,color:m.project.color},e.id)):(0,s.jsx)(s.Fragment,{children:" Aucun ticket n'est ouvert"})]})]}),(0,s.jsx)("div",{className:"BlocDouble second_line",children:(0,s.jsxs)("div",{className:"DernierTicket",children:[(0,s.jsx)("h2",{children:"Derniers retours d'exp\xe9riences"}),(0,s.jsx)(R,{userData:e,RexData:m.rex,idProject:m.project.id,color:m.project.color})]})})]}),(0,s.jsxs)("div",{className:"MyTeam",children:[(0,s.jsxs)("div",{className:"Entete",children:[(0,s.jsxs)("div",{className:"TitleProjetCards",children:[(0,s.jsx)("h2",{children:"Membres de l'\xe9quipe"}),(0,s.jsx)(c.A,{children:(0,s.jsx)(l.A,{fontSize:"medium",sx:{color:"#000000"}})})]}),(0,s.jsxs)("div",{className:"fleches",children:[(0,s.jsx)(d(),{src:"/assets/chevron-left.svg",alt:"",width:20,height:20,className:"swiper-button-prev swiper-button-prev-2 fleche"}),(0,s.jsx)(d(),{src:"/assets/chevron-right.svg",alt:"",width:20,height:20,className:"swiper-button-next swiper-button-next-2 fleche"})]})]}),(0,s.jsx)(x.A,{swiperId:2,children:(0,s.jsx)("div",{className:"ProjetCards",children:m?.userTeam?m?.userTeam.map(e=>s.jsx(n.qr,{children:s.jsx(P,{avatar:e.avatar,firstName:e.user_firstname,lastName:e.user_lastname,bio:e.user_bio,grade:0})},e.id)):null})})]})]})})})}},19628:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(94335);async function a(e,t){try{return(await s.A.get("https://centralized.fr/api/teamuser/project/"+e,{headers:{Authorization:`Bearer ${t}`}})).data}catch(e){console.log(e)}}},5631:(e,t,r)=>{"use strict";async function s(e){let t=["template","status"];for(let r in e)if(!t.includes(r)&&""==e[r])return!1;return!0}r.d(t,{A:()=>s})},94577:()=>{},9986:()=>{},81781:()=>{},86994:()=>{},31068:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[201,108,699,39,636,593,792],()=>t(23896)),_N_E=e.O()}]);