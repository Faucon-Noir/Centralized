(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{47017:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return t(19542)}])},19542:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var n=t(72253),l=t(14932),i=t(91309),o=t(85893),r=t(12485),s=t(26991),c=t(5616),d=t(93946),u=t(55771),h=t(11057);t(86201);var m=t(55554),p=t(67294),f=t(20518),x=t(87066),_=t(61202);function v(e){var a=e.userData;e.updateUserData;var t=(0,i._)((0,p.useState)({id:"",avatar:{},lastname:"",firstname:"",mail:"",phone:"",bio:"",password:""}),2),v=t[0],g=t[1],b=(0,i._)((0,p.useState)(!1),2),j=b[0],y=b[1],N=(0,i._)((0,p.useState)(""),2),k=N[0],w=N[1],C="",F="https://centralized.fr:8000/api/",Z=function(e){e.preventDefault(),C=D.id;var t=new FormData;Object.keys(v).forEach(function(e){var a=v[e];void 0!==a&&t.append(e,a)}),x.Z.patch("".concat(F,"user/").concat(C),t,{headers:{Authorization:"Bearer ".concat(a.user.token),"Content-Type":"multipart/form-data"}}).then(function(e){window.location.reload()}).catch(function(e){console.log(e)})},E=localStorage.getItem("token"),D=(0,_.o)(E);return C=D.id,(0,p.useEffect)(function(){try{x.Z.get("".concat(F,"user/").concat(a.user.id),{headers:{Authorization:"Bearer ".concat(a.user.token)}}).then(function(e){g(e.data)})}catch(e){console.log("error",e)}},[a]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"accent"}),(0,o.jsx)("div",{style:{display:"block"},children:(0,o.jsxs)("div",{className:"profile-photo",style:{position:"relative"},children:[(0,o.jsx)(r.Z,{src:k||"/media/".concat(v.avatar),sx:{height:"100%",width:"100%"}}),(0,o.jsx)("div",{id:"inner",className:"inner",onClick:function(){y(!0)},children:(0,o.jsx)(m.Z,{sx:{fontSize:"30px"}})}),(0,o.jsx)(s.Z,{open:j,children:(0,o.jsxs)(c.Z,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",borderRadius:"10px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsx)(d.Z,{onClick:function(){y(!1)},style:{position:"absolute",top:10,right:10},children:(0,o.jsx)(f.Z,{})}),(0,o.jsx)(u.Z,{type:"file",onChange:function(e){var a,t=null===(a=e.target.files)||void 0===a?void 0:a[0];t?["image/png","image/jpeg"].includes(t.type)&&t.size<=2097152?(g((0,l._)((0,n._)({},v),{avatar:t})),w(URL.createObjectURL(t)),y(!1)):alert("Le fichier doit \xeatre une image de type png ou jpeg et ne doit pas d\xe9passer 2Mo"):console.log("No file selected")}})]})})]})}),(0,o.jsxs)("form",{children:[(0,o.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,o.jsx)("label",{"data-cy":"first_name_label",htmlFor:"firstName",children:"First Name"}),(0,o.jsx)("input",{"data-cy":"first_name_field",className:"textField",placeholder:"Votre pr\xe9nom",value:(null==v?void 0:v.firstname)?v.firstname:"",onChange:function(e){return g((0,l._)((0,n._)({},v),{firstname:e.target.value}))}}),(0,o.jsx)("label",{"data-cy":"last_name_label",htmlFor:"lastName",children:"Last Name"}),(0,o.jsx)("input",{"data-cy":"last_name_field",className:"textField",placeholder:"Votre nom",value:(null==v?void 0:v.lastname)?v.lastname:"",onChange:function(e){return g((0,l._)((0,n._)({},v),{lastname:e.target.value}))}}),(0,o.jsx)("label",{"data-cy":"email_label",htmlFor:"email",children:"Email"}),(0,o.jsx)("input",{"data-cy":"email_field",className:"textField",placeholder:"Votre adresse mail",value:(null==v?void 0:v.mail)?v.mail:"",onChange:function(e){return g((0,l._)((0,n._)({},v),{mail:e.target.value}))}}),(0,o.jsx)("label",{"data-cy":"phone_label",htmlFor:"phone",children:"Phone"}),(0,o.jsx)("input",{"data-cy":"phone_field",className:"textField",placeholder:"Votre num\xe9ro de t\xe9l\xe9phone",value:(null==v?void 0:v.phone)?v.phone:"",onChange:function(e){return g((0,l._)((0,n._)({},v),{phone:e.target.value}))}}),(0,o.jsx)("label",{"data-cy":"bio_label",htmlFor:"bio",children:"Bio"}),(0,o.jsx)("input",{"data-cy":"bio_field",className:"textField",placeholder:"Une courte description de vous-m\xeame",value:(null==v?void 0:v.bio)&&"null"!==v.bio?v.bio:"",onChange:function(e){return g((0,l._)((0,n._)({},v),{bio:e.target.value}))}})]}),(0,o.jsx)(h.Z,{disabled:!v,className:"cta-primary",type:"submit",onClick:function(e){return Z(e)},children:"Sauvegarder"})]})]})}},86201:function(){}},function(e){e.O(0,[607,677,774,888,179],function(){return e(e.s=47017)}),_N_E=e.O()}]);