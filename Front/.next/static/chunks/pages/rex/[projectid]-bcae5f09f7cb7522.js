(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{96540:function(e,r,s){"use strict";var t=s(64836);r.Z=void 0;var n=t(s(64938)),i=s(85893);r.Z=(0,n.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},3149:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rex/[projectid]",function(){return s(4802)}])},4802:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return m}});var t=s(11010),n=s(72253),i=s(14932),a=s(91309),o=s(97582),l=s(85893),u=s(67294),c=s(11163);s(45774);var d=s(87066),x=s(82607),h=s(96540);function m(e){var r=e.userData;e.updateUserData,(0,c.useRouter)();var s=(0,a._)((0,u.useState)(!1),2),m=s[0],p=s[1],f=(0,a._)((0,u.useState)({rexProbleme:"",rexReussite:"",rexAmelioration:"",idProjet:""}),2),j=f[0],v=f[1],_=(0,a._)((0,u.useState)({answer1:"",answer2:"",answer3:""}),2),w=_[0],b=_[1],N=(0,a._)((0,u.useState)({budget:"",constraint:"",description:"",end_date:"",forecast:"",functionality:"",id:"",name:"",start_date:"",status:!1,team_user:"",technology:"",validation:"",team:"",user:"",template:"",constraints:""}),2),R=N[0],g=N[1],C=(0,a._)((0,u.useState)(0),2),P=C[0],y=C[1];function q(){return(q=(0,t._)(function(e){var s;return(0,o.Jh)(this,function(t){return e.preventDefault(),y(s=""==j.rexReussite.trim()?1:""==j.rexProbleme.trim()?2:""==j.rexAmelioration.trim()?3:0),0==s&&d.Z.post("".concat("https://centralized.fr/api/","rex"),{project:R.id,answer1:j.rexReussite.trim(),answer2:j.rexProbleme.trim(),answer3:j.rexAmelioration.trim()},{headers:{Authorization:"Bearer ".concat(r.user.token)}}).then(function(e){200===e.status&&e.data.success?window.location.reload():y(4)}).catch(function(e){console.log("error",e),y(4)}),[2]})})).apply(this,arguments)}return(0,u.useEffect)(function(){var e=!0,s=!1,t=void 0;try{for(var n,i=r.project[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;a.id==new URL(window.location.href).pathname.split("/")[2]&&(Object.keys(null==a?void 0:a.rex).length<1&&p(!0),g(a),b(a.rex))}}catch(e){s=!0,t=e}finally{try{e||null==i.return||i.return()}finally{if(s)throw t}}},[r]),(0,l.jsx)("div",{children:m?(0,l.jsx)("form",{onSubmit:function(e){return function(e){return q.apply(this,arguments)}(e)},children:(0,l.jsxs)("div",{className:"box",children:[(0,l.jsx)("h1",{className:"title",children:"Retour d'Exp\xe9rience"}),(0,l.jsxs)("div",{className:"input_form",children:[(0,l.jsx)("label",{htmlFor:"rexReussite",children:"Ce qui s'est bien pass\xe9?"}),(0,l.jsx)("textarea",{id:"rexReussite",name:"rexReussite",required:!0,onChange:function(e){return v((0,i._)((0,n._)({},j),{rexReussite:e.target.value}))}}),1==P?(0,l.jsxs)("p",{className:"error_message",children:["Veuillez \xe9crire les points positifs trouv\xe9s"," "]}):""]}),(0,l.jsxs)("div",{className:"input_form",children:[(0,l.jsx)("label",{htmlFor:"rexProbleme",children:"Ce qui s'est mal pass\xe9?"}),(0,l.jsx)("textarea",{id:"rexProbleme",name:"rexProbleme",required:!0,onChange:function(e){return v((0,i._)((0,n._)({},j),{rexProbleme:e.target.value}))}}),2==P?(0,l.jsxs)("p",{className:"error_message",children:["Veuillez \xe9crire les points bloquants trouv\xe9s"," "]}):""]}),(0,l.jsxs)("div",{className:"input_form",children:[(0,l.jsx)("label",{htmlFor:"rexAmelioration",children:"Ce qui pourrait \xeatre am\xe9lior\xe9?"}),(0,l.jsx)("textarea",{id:"rexAmelioration",name:"rexAmelioration",required:!0,onChange:function(e){return v((0,i._)((0,n._)({},j),{rexAmelioration:e.target.value}))}}),3==P?(0,l.jsxs)("p",{className:"error_message",children:["Veuillez \xe9crire les points pouvant \xeatre am\xe9lior\xe9s"," "]}):""]}),4==P?(0,l.jsx)("p",{className:"error_message",children:"Une erreur est survenue"}):"",(0,l.jsx)("button",{type:"submit",children:"Cloturer le projet"})]})}):(0,l.jsxs)("div",{className:"noRex",children:[(0,l.jsxs)("div",{className:"header",children:[(0,l.jsx)("h1",{children:"Retour d'experience"}),(0,l.jsx)(x.Z,{onClick:function(){return p(!0)},children:(0,l.jsx)(h.Z,{fontSize:"medium",sx:{color:"#000000"}})})]}),(0,l.jsx)("hr",{style:{marginLeft:0}}),(0,l.jsxs)("div",{className:"showRex",children:[(0,l.jsxs)("div",{className:"showRexProps",children:[(0,l.jsx)("h3",{children:"Ce qu'il c'est pass\xe9 ?"}),(0,l.jsx)("p",{children:null==w?void 0:w.answer1})]}),(0,l.jsxs)("div",{className:"showRexProps",children:[(0,l.jsx)("h3",{children:"Ce qui s'est mal pass\xe9 ?"}),(0,l.jsx)("p",{children:null==w?void 0:w.answer2})]}),(0,l.jsxs)("div",{className:"showRexProps",children:[(0,l.jsx)("h3",{children:"Ce qui pourrait \xeatre am\xe9lior\xe9 ?"}),(0,l.jsx)("p",{children:null==w?void 0:w.answer3})]})]})]})})}},45774:function(){}},function(e){e.O(0,[607,774,888,179],function(){return e(e.s=3149)}),_N_E=e.O()}]);