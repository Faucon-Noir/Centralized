(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{95356:(e,r,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/rex/[projectid]",function(){return s(91808)}])},95191:(e,r,s)=>{"use strict";var t=s(24994);r.A=void 0;var i=t(s(58117)),a=s(74848);r.A=(0,i.default)((0,a.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},91808:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c});var t=s(74848),i=s(96540),a=s(86715);s(25079);var n=s(94335),l=s(80108),o=s(95191);function c({userData:e,updateUserData:r}){(0,a.useRouter)();let[s,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)({rexProbleme:"",rexReussite:"",rexAmelioration:"",idProjet:""}),[x,h]=(0,i.useState)({answer1:"",answer2:"",answer3:""}),[m,p]=(0,i.useState)({budget:"",constraint:"",description:"",end_date:"",forecast:"",functionality:"",id:"",name:"",start_date:"",status:!1,team_user:"",technology:"",validation:"",team:"",user:"",template:"",constraints:""}),[j,v]=(0,i.useState)(0);async function f(r){r.preventDefault();let s=""==d.rexReussite.trim()?1:""==d.rexProbleme.trim()?2:""==d.rexAmelioration.trim()?3:0;v(s),0==s&&n.A.post("https://centralized.fr/api/rex",{project:m.id,answer1:d.rexReussite.trim(),answer2:d.rexProbleme.trim(),answer3:d.rexAmelioration.trim()},{headers:{Authorization:`Bearer ${e.user.token}`}}).then(function(e){200===e.status&&e.data.success?window.location.reload():v(4)}).catch(function(e){console.log("error",e),v(4)})}return(0,i.useEffect)(()=>{for(let r of e.project)r.id==new URL(window.location.href).pathname.split("/")[2]&&(Object.keys(r?.rex).length<1&&c(!0),p(r),h(r.rex))},[e]),(0,t.jsx)("div",{children:s?(0,t.jsx)("form",{onSubmit:e=>f(e),children:(0,t.jsxs)("div",{className:"box",children:[(0,t.jsx)("h1",{className:"title",children:"Retour d'Exp\xe9rience"}),(0,t.jsxs)("div",{className:"input_form",children:[(0,t.jsx)("label",{htmlFor:"rexReussite",children:"Ce qui s'est bien pass\xe9?"}),(0,t.jsx)("textarea",{id:"rexReussite",name:"rexReussite",required:!0,onChange:e=>u({...d,rexReussite:e.target.value})}),1==j?(0,t.jsxs)("p",{className:"error_message",children:["Veuillez \xe9crire les points positifs trouv\xe9s"," "]}):""]}),(0,t.jsxs)("div",{className:"input_form",children:[(0,t.jsx)("label",{htmlFor:"rexProbleme",children:"Ce qui s'est mal pass\xe9?"}),(0,t.jsx)("textarea",{id:"rexProbleme",name:"rexProbleme",required:!0,onChange:e=>u({...d,rexProbleme:e.target.value})}),2==j?(0,t.jsxs)("p",{className:"error_message",children:["Veuillez \xe9crire les points bloquants trouv\xe9s"," "]}):""]}),(0,t.jsxs)("div",{className:"input_form",children:[(0,t.jsx)("label",{htmlFor:"rexAmelioration",children:"Ce qui pourrait \xeatre am\xe9lior\xe9?"}),(0,t.jsx)("textarea",{id:"rexAmelioration",name:"rexAmelioration",required:!0,onChange:e=>u({...d,rexAmelioration:e.target.value})}),3==j?(0,t.jsxs)("p",{className:"error_message",children:["Veuillez \xe9crire les points pouvant \xeatre am\xe9lior\xe9s"," "]}):""]}),4==j?(0,t.jsx)("p",{className:"error_message",children:"Une erreur est survenue"}):"",(0,t.jsx)("button",{type:"submit",children:"Cloturer le projet"})]})}):(0,t.jsxs)("div",{className:"noRex",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("h1",{children:"Retour d'experience"}),(0,t.jsx)(l.A,{onClick:()=>c(!0),children:(0,t.jsx)(o.A,{fontSize:"medium",sx:{color:"#000000"}})})]}),(0,t.jsx)("hr",{style:{marginLeft:0}}),(0,t.jsxs)("div",{className:"showRex",children:[(0,t.jsxs)("div",{className:"showRexProps",children:[(0,t.jsx)("h3",{children:"Ce qu'il c'est pass\xe9 ?"}),(0,t.jsx)("p",{children:x?.answer1})]}),(0,t.jsxs)("div",{className:"showRexProps",children:[(0,t.jsx)("h3",{children:"Ce qui s'est mal pass\xe9 ?"}),(0,t.jsx)("p",{children:x?.answer2})]}),(0,t.jsxs)("div",{className:"showRexProps",children:[(0,t.jsx)("h3",{children:"Ce qui pourrait \xeatre am\xe9lior\xe9 ?"}),(0,t.jsx)("p",{children:x?.answer3})]})]})]})})}},25079:()=>{}},e=>{var r=r=>e(e.s=r);e.O(0,[108,636,593,792],()=>r(95356)),_N_E=e.O()}]);