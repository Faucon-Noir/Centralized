(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{89221:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(11010),a=n(72253),s=n(14932),i=n(91309),c=n(97582),o=n(85893),l=n(67294);n(70340);var u=n(87066);function d(e){var t=e.team,n=e.userData,d=e.clickable,m=(0,i._)((0,l.useState)([{id:0}]),2),h=m[0],p=m[1],f=(0,i._)((0,l.useState)(t),2),g=f[0],v=f[1],x=(0,i._)((0,l.useState)(""),2),j=x[0],_=x[1],b=(0,i._)((0,l.useState)(!1),2),y=b[0],N=b[1],w=(0,i._)((0,l.useState)(!1),2),k=(w[0],w[1]),C="https://centralized.fr/api/";function z(){return(z=(0,r._)(function(e){return(0,c.Jh)(this,function(t){switch(t.label){case 0:console.log(e),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,u.Z.delete("".concat(C,"teamuser/")+e.id,{headers:{Authorization:"Bearer ".concat(n.user.token)}}).then(function(t){200===t.status&&(e.user.id==n.user.id?window.location.reload():p(function(t){return t.filter(function(t){return t.id!==e.id})}))})];case 2:return t.sent(),[3,4];case 3:return console.log(t.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}function A(){return(A=(0,r._)(function(e,t){return(0,c.Jh)(this,function(r){switch(r.label){case 0:return console.log(e,t),[4,u.Z.post("".concat(C,"teamuser/"),{user:e,team:t},{headers:{Authorization:"Bearer ".concat(n.user.token)}})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}function S(){return(S=(0,r._)(function(){var e,t,r,a,s,i,o;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return[4,u.Z.patch("".concat(C,"team/")+g.id,g,{headers:{Authorization:"Bearer ".concat(n.user.token)}})];case 1:if(200!=c.sent().status)return[3,10];e=!0,t=!1,r=void 0,c.label=2;case 2:c.trys.push([2,8,9,10]),a=j.split(",")[Symbol.iterator](),c.label=3;case 3:if(e=(s=a.next()).done)return[3,7];if(!(!String((i=s.value).trim()).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&i.trim().length>0))return[3,4];return k(!0),[3,6];case 4:return console.log("ok"),[4,function(e,t){return A.apply(this,arguments)}(i.trim(),g.id)];case 5:c.sent(),c.label=6;case 6:return e=!0,[3,3];case 7:return[3,10];case 8:return o=c.sent(),t=!0,r=o,[3,10];case 9:try{e||null==a.return||a.return()}finally{if(t)throw r}return[7];case 10:return window.location.reload(),[2]}})})).apply(this,arguments)}return(0,l.useEffect)(function(){try{u.Z.get("".concat(C,"teamuser/")+t.id,{headers:{Authorization:"Bearer ".concat(n.user.token)}}).then(function(e){200==e.status&&p(e.data)}),console.log("API URL",C)}catch(e){console.log(e)}},[C,t.id,n.user.token]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"card_team",onClick:function(){return d?N(!0):null},children:[(0,o.jsx)("div",{className:"card-header yellow",children:(0,o.jsx)("img",{src:"/media/"+t.avatar,alt:"avatar",className:"avatar",onError:function(e){e.currentTarget.src="/assets/avatar_team.png"}})}),(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsx)("h2",{className:"team-name",children:t.name}),(0,o.jsx)("div",{className:"card-footer",children:(0,o.jsxs)("div",{className:"team-info",children:[(0,o.jsx)("i",{className:"icon",children:"\uD83D\uDC65"}),(0,o.jsxs)("span",{children:[null==h?void 0:h.length," personnes"]})]})})]})]}),y?(0,o.jsx)("div",{className:"team_modal_card",children:(0,o.jsxs)("div",{className:"team_main_modal_card",children:[(0,o.jsx)("img",{src:"/assets/icons/icon-cross.svg",alt:"",className:"cross",onClick:function(){return N(!1)}}),(0,o.jsxs)("div",{className:"team_main_modal_content",children:[(0,o.jsx)("div",{className:"image_container",children:(0,o.jsx)("img",{src:"/media/"+t.avatar,alt:"avatar",className:"avatar",onError:function(e){e.currentTarget.src="/assets/avatar_team.png"}})}),(0,o.jsxs)("div",{className:"right_modal_container",children:[(0,o.jsx)("input",{type:"text",value:g.name,onChange:function(e){return v((0,s._)((0,a._)({},g),{name:e.target.value}))}}),(0,o.jsx)("div",{className:"user_container",children:h?h.map(function(e){return(0,o.jsxs)("div",{className:"one_user",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("img",{src:"/assets/icons/user.png",alt:""})," ",": ",e.user.lastname," ",e.user.firstname]}),e.user.id===n.user.id?(0,o.jsx)("p",{children:"(vous)"}):null,(0,o.jsxs)("p",{children:[(0,o.jsx)("img",{src:"/assets/icons/email.png",alt:""})," ",": ",e.user.mail]}),(0,o.jsx)("img",{src:"/assets/icons/bin.png",className:"bin_img",alt:"",onClick:function(){return function(e){return z.apply(this,arguments)}(e)}})]},e.id)}):null}),(0,o.jsx)("input",{type:"text",placeholder:"Ajouter des membres (email)",onChange:function(e){return _(e.target.value)}}),(0,o.jsx)("button",{onClick:function(){return function(){return S.apply(this,arguments)}()},children:"Termin\xe9"})]})]})]})}):null]})}},87461:function(e,t,n){"use strict";var r=n(11010),a=n(72253),s=n(14932),i=n(91309),c=n(97582),o=n(85893),l=n(67294);n(20870);var u=n(87066),d=n(75898),m=n(11057),h=n(54970);t.Z=function(e){var t=e.userData;e.setUserStep;var n=(0,i._)((0,l.useState)(!1),2),p=n[0],f=n[1],g=(0,d.Z)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),v=(0,i._)((0,l.useState)({name:"",avatar:"",members:""}),2),x=v[0],j=v[1],_="https://centralized.fr/api/",b=function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n?["image/png","image/jpeg"].includes(n.type)&&n.size<=2097152?j((0,s._)((0,a._)({},x),{avatar:n})):alert("Le fichier doit \xeatre une image de type png ou jpeg et ne doit pas d\xe9passer 2Mo"):console.log("No file selected")};function y(){return(y=(0,r._)(function(){var e,n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:return e=new FormData,Object.keys(x).forEach(function(t){"members"!=t&&e.append(t,x[t])}),[4,u.Z.post("".concat(_,"team/").concat(t.user.id),e,{headers:{Authorization:"Bearer ".concat(t.user.token),"Content-Type":"multipart/form-data"}})];case 1:if(200==(n=r.sent()).status)return[2,n.data];return[2,!1]}})})).apply(this,arguments)}function N(){return(N=(0,r._)(function(e,n){return(0,c.Jh)(this,function(r){switch(r.label){case 0:return console.log(e,n),[4,u.Z.post("".concat(_,"teamuser"),{user:e,team:n},{headers:{Authorization:"Bearer ".concat(t.user.token)}})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var t,n,r,a,s,i,o,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:return e.preventDefault(),[4,function(){return y.apply(this,arguments)}()];case 1:if(!(!1!=(t=c.sent())))return[3,10];n=!0,r=!1,a=void 0,c.label=2;case 2:c.trys.push([2,8,9,10]),s=x.members.split(",")[Symbol.iterator](),c.label=3;case 3:if(n=(i=s.next()).done)return[3,7];if(!(!String((o=i.value).trim()).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&o.trim().length>0))return[3,4];return f(!0),[3,6];case 4:return console.log("ok"),[4,function(e,t){return N.apply(this,arguments)}(o.trim(),t.team.id)];case 5:c.sent(),c.label=6;case 6:return n=!0,[3,3];case 7:return[3,10];case 8:return l=c.sent(),r=!0,a=l,[3,10];case 9:try{n||null==s.return||s.return()}finally{if(r)throw a}return[7];case 10:return window.location.reload(),[2]}})})).apply(this,arguments)}return(0,o.jsxs)("div",{className:"team_form",children:[(0,o.jsx)("h3",{children:"Cr\xe9ez votre \xe9quipe"}),(0,o.jsxs)("div",{className:"same_line",children:[(0,o.jsxs)("div",{className:"input_grp",children:[(0,o.jsx)("p",{children:"Nom de l'\xe9quipe*"}),(0,o.jsx)("input",{type:"text",placeholder:"Centralized",name:"",id:"",onChange:function(e){return j((0,s._)((0,a._)({},x),{name:e.target.value.trim()}))}})]}),(0,o.jsxs)("div",{className:"input_grp",children:[(0,o.jsx)("p",{children:"Avatar"}),(0,o.jsxs)(m.Z,{sx:{backgroundColor:"#0293FC",borderRadius:"10px",padding:"5px",color:"white",minWidth:"200px",margin:"5px",fontSize:"12px",fontFamily:"__myFont_834f5e"},component:"label",role:void 0,variant:"contained",startIcon:(0,o.jsx)(h.Z,{}),children:["Ajouter une image",(0,o.jsx)(g,{type:"file",onChange:function(e){return b(e)}})]})]})]}),(0,o.jsx)("div",{className:"second_line",children:(0,o.jsxs)("div",{className:"input_grp",children:[(0,o.jsx)("p",{children:"Membres"}),(0,o.jsx)("p",{style:{fontSize:"10px"},children:"Ajouter des membres via leurs email s\xe9par\xe9 d'une virgule."}),(0,o.jsx)("input",{type:"input",placeholder:"aaaa@gmail.com, bbbb@gmail.com, cccc@gmail.com",name:"",id:"",onChange:function(e){return j((0,s._)((0,a._)({},x),{members:e.target.value.trim()}))}}),p?(0,o.jsx)("p",{style:{backgroundColor:"#EF9A9A",padding:"5px",color:"white",borderRadius:"5px",marginTop:"10px",textAlign:"center",width:"60%"},children:"Veuillez entrer un email valide"}):null]})}),(0,o.jsx)("button",{className:"next_btn",onClick:function(e){return function(e){return w.apply(this,arguments)}(e)},children:"Suivant"})]})}},70340:function(){},20870:function(){}}]);